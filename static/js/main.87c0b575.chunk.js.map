{"version":3,"sources":["service/firebase.js","context/AuthContext.js","components/App/App.js","images/empty.png","components/Chat/ChatList/ChatCard.js","components/Chat/ChatSettings/ChatAvatar.js","components/Chat/ChatSettings/EditProfile.js","components/Chat/ChatSettings/ChatProfile.js","components/Chat/ChatList/ChatAvatar.js","components/Chat/ChatList/EditProfile.js","images/loading.svg","components/Chat/ChatList/ChatProfile.js","components/Chat/ChatLoader.js","components/Chat/ChatList/NewChatForm.js","components/Chat/ChatList/ChatList.js","images/chatlogo.png","components/Chat/ChatFeed/ChatListDrawer.js","components/Chat/ChatFeed/ChatHeader.js","components/Chat/ChatFeed/IsTyping.js","components/Chat/Thumbnail.js","components/Chat/ChatSettings/PhotosSettings.js","components/Chat/ChatSettings/ChatSettingsBox.js","components/Chat/ChatFeed/NewMessageForm/Thumbnail.js","components/Chat/ChatFeed/NewMessageForm/FileRow.js","components/Chat/ChatFeed/NewMessageForm/ImagesInput.js","components/Chat/ChatFeed/NewMessageForm/MessageInput.js","components/Chat/ChatFeed/NewMessageForm/NewMessageForm.js","images/send.png","components/Chat/Chat.js","components/Login/formikConfig.js","components/Login/Login.js","components/Signup/formikConfig.js","components/Signup/Signup.js","components/FormField/FormField.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","error","test","message","console","stack","fb","auth","storage","firestore","googleProvider","GoogleAuthProvider","facebookProvider","FacebookAuthProvider","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","loading","setLoading","userObject","setUserObject","convertedName","setConvertedName","history","useHistory","lowerLetters","str","toLowerCase","useEffect","onAuthStateChanged","user","displayName","email","substring","lastIndexOf","push","encodeURIComponent","value","Provider","App","className","exact","path","component","Chat","Login","Signup","styles","chatContainer","padding","paddingBottom","cursor","titleText","fontWeight","whiteSpace","overflow","status","width","height","borderRadius","border","position","top","messageText","color","fontSize","display","activeChat","backgroundColor","ChatCard","props","ChatEngineContext","conn","setActiveChat","chat","extraStyle","id","otherPerson","people","find","person","username","userName","convertedUsername","title","lower","replace","match","toUpperCase","capitalize","decodeURIComponent","lastMessage","last_message","text","attachments","length","onClick","style","avatar","is_online","src","empty","created","date","convertedDate","year","substr","month","day","hour","minute","second","d","Date","offset","getTimezoneOffset","setHours","getHours","getDateTime","sent","toString","dayStr","timeStr","someDate","today","getDate","getMonth","getFullYear","isToday","timeSinceDate","readLastMessage","map","chat_person","last_read","marginTop","marginLeft","ChatAvatar","file","close","onSubmit","crop","userstatus","imageSrc","setImageSrc","cropRef","useRef","newUsername","newStatus","log","fr","FileReader","onload","result","readAsDataURL","ref","image","Image","size","alt","canvas","current","getImageScaledToCanvas","toDataURL","fetch","then","res","blob","EditProfile","setNewStatus","placeholder","onChange","e","target","ChatProfile","avatarURL","setAvatarURL","userStatus","setUserStatus","inputRef","setImage","avatarState","setAvatarState","avatarVisibility","setAvatarVisibility","editing","setEditing","name","secret","myHeaders","Headers","append","userSecret","method","headers","redirect","response","json","first_name","type","accept","files","onFileAttach","header","mode","croppedImage","uid","formdata","FormData","body","updateAv","IconGroup","input","click","Icon","corner","inverted","circular","Loader","active","updateProfile","EditOutlined","DeleteOutlined","window","confirm","chatID","firstUser","secondUser","catch","deleteActiveChat","LogoutOutlined","signOut","loadingAnimation","ChatLoader","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","onVisible","observe","disconnect","useOnScreen","NewChatForm","setUsername","newChatError","setNewChatError","createDirectChat","creds","newName","setTimeout","data","some","x","getOrCreateChat","is_direct_chat","usernames","preventDefault","PlusOutlined","chatListContainer","maxHeight","overflowX","fontFamily","chatsContainer","ChatList","didMountRef","setLoadChats","hasMoreChats","setHasMoreChats","editingProfile","setEditingProfile","chats","setChats","chatAppState","sortChats","sort","a","b","aDate","bDate","onGetChats","chatList","oldChats","newChats","_","mapKeys","allChats","Object","keys","getLatestChats","values","UserOutlined","document","querySelector","BgColorsOutlined","classList","toggle","renderNewChatForm","onClose","undefined","index","renderChatCard","renderChats","ChatListDrawer","isOpen","setIsOpen","MenuOutlined","outline","drawerContainer","CloseOutlined","closeIcon","onChatClick","zIndex","left","textAlign","titleContainer","setConfiguration","maxScreenClass","gutterWidth","ChatHeader","titleSection","xs","sm","mobileOptiom","subtitleText","IsTyping","now","currentTime","setCurrentTime","typingCounter","typers","setInterval","paddingLeft","Thumbnail","attachment","container","paddingTop","objectFit","PhotosSettings","collapsed","hovered","errorMessage","state","setState","borderTop","onMouseEnter","onMouseLeave","letterSpacing","LeftOutlined","collapseIcon","DownOutlined","float","bottom","right","ChatSettingsBox","setHovered","setBlob","URL","createObjectURL","imageSquare","CloseCircleTwoTone","onRemove","FileRow","ImagesInput","encType","htmlFor","PaperClipOutlined","visibility","event","Array","from","onSelectFiles","onSelect","MessageInput","focused","textarea","getElementById","Math","min","scrollHeight","this","resize","handleChange","key","overflowY","rows","label","onBlur","onFocus","onKeyDown","maxlength","required","Component","paddingRight","NewMessageForm","sendingMessages","setSendingMessages","trigger","mod","handleSubmit","trim","custom_json","sender_id","sender_username","senderUsername","sendMessage","newSendingMessages","NewMessageFormContainer","i","splice","bind","inputContainer","isTyping","icon","minHeight","newAccountStatus","setNewAccountStatus","config","url","axios","otherName","raw","JSON","stringify","contentType","addDefaultChat","projectID","renderChatList","renderChatHeader","renderIsTyping","renderPhotosSettings","renderChatSettings","renderNewMessageForm","chatId","defaultValues","password","validationSchema","Yup","shape","serverError","setServerError","CommentOutlined","setSubmitting","signInWithEmailAndPassword","err","code","finally","validateOnMount","initialValues","isValid","isSubmitting","class","LockOutlined","signInWithRedirect","GoogleOutlined","FacebookOutlined","verifyPassword","oneOf","matches","max","createUserWithEmailAndPassword","FormField","require","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.87c0b575.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\n\r\ntry {\r\n    firebase.initializeApp({\r\n\r\n        apiKey: process.env.REACT_APP_API_KEY,\r\n        authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n        projectId: process.env.REACT_APP_PROJECT_ID,\r\n        storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n        messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n        appId: process.env.REACT_APP_APP_ID\r\n    });\r\n} catch (error) {\r\n    if (!/already exists/u.test(error.message)) {\r\n        console.error('firebase admin init error', error.stack);\r\n    }\r\n}\r\n\r\nexport const fb = {\r\n    auth: firebase.auth(),\r\n    storage: firebase.storage(),\r\n    firestore: firebase.firestore()\r\n}\r\nexport const googleProvider = new firebase.auth.GoogleAuthProvider();\r\nexport const facebookProvider = new firebase.auth.FacebookAuthProvider();","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { fb } from \"service\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [userObject, setUserObject] = useState({});\r\n    const [convertedName, setConvertedName] = useState();\r\n    const history = useHistory();\r\n\r\n    function lowerLetters(str) {\r\n        return str.toLowerCase();\r\n    }\r\n\r\n    useEffect(() => {\r\n        fb.auth.onAuthStateChanged((user) => {\r\n            if (user && user.displayName == null) {\r\n                // When logging with custom account\r\n                setUserObject(user);\r\n                setConvertedName(\r\n                    lowerLetters(user.email.substring(0, user.email.lastIndexOf(\"@\")))\r\n                );\r\n                setLoading(false);\r\n                history.push(\"/react-chat-app\");\r\n            } else if (user && user.displayName !== null) {\r\n                // When logging with gmail/fb account\r\n                setUserObject(user);\r\n                setConvertedName(encodeURIComponent(lowerLetters(user.displayName)));\r\n                setLoading(false);\r\n                history.push(\"/react-chat-app\");\r\n            } else {\r\n                setUserObject(null);\r\n                history.push(\"/login\");\r\n                setLoading(false);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const value = { userObject, convertedName };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","import { Route, Switch } from 'react-router-dom';\nimport { Login, Signup, Chat } from 'components';\nimport { AuthProvider } from 'context/AuthContext.js';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport React, {  useEffect , useState} from \"react\";\n\nexport const App = () => {\n  \n\n    return (\n        <div className=\"app\">\n            <Router>\n                <AuthProvider>\n                    <Switch>\n                        <Route exact path=\"/react-chat-app\" component={Chat} />\n                        <Route path=\"/login\" component={Login} />\n                        <Route path=\"/signup\" component={Signup} />\n                    </Switch>\n                </AuthProvider>\n            </Router>\n        </div>\n    )\n}","export default \"data:image/png;base64,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czpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDpiMzg1YmEyYi0yN2Y3LTRmNDMtOTBlMi1jYWExYWMxNjdjYmIiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MmM3ZTFlMDYtODcyYS00OTNiLWEyM2QtZTU2NzFmMzY2OGI1IgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NGJkYWRlY2EtYTE5Ni00ZGI4LWFmZTgtZjVlMWNlMzg1NTI5IgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE2MjU4MDA0MjU5ODU0OTgiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4yNCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMjlmYWQwMi05YWIyLTQxNzctOGE2NS0xYzFiODgyNTdkODUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDctMDlUMDU6MTM6NDUiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+7sjJCgAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UHCQMNLbdCL2oAAAYLSURBVHja7d0xa+NIGIDhuVNkBKpUGQxutjIY/P/b/IWAQVUagyGVKoPxYvaKw7nkdu/iZD1jjeZ5qlyzl9h+Nd9MIvuPx8fHHwG4uT89BCAuEBcgLhAXiAsQF4gLxAWIC8QF4gLEBeICcQHiAnGBuABxgbhAXIC4QFwgLkBcIC4QFyAuEBeICxAXiAvEBYgLxAXiAsQF4gJxAeICccEUPXgIxqeu69evq6p69/X5fH7978vX379/96CJi1+FVFVVqKoqzOfz0HXdl/+tYRjCy8tLOJ/P4Xw+i05cZca0WCx+K6Rf6brup3+z7/twPp/D8Xj04ItrmpqmiRLUR1ar1bvQTqeTFU1c09C27bsX+D1dvo9hGMJ+v7eaiUtUt3YZH4dhCLvdzkomrnz2VMvlMvn49zuR9X0fDoeDJ09c495Xrdfr7L7v1WplFYvAL5FvOAbmGNbbVWyz2bz7HRvisr+6IYGJS1gCE9fU91hTC0tg4rq7uq6z3mNdY7lceqLF5YUXQ9d1oWkaT7a40o6DOfwe6xbW67XxUFxpX3Almc1mnnRxxde2bXE/82q1snqJK80LrURWL3FF32u5qCCuCBaLhYsL4rq1uq6LOSF0cRFXUm/fKKZUpV9cxCWu6Cs44rKhd5ERl6u1fZe4AHEZheJwqCEucRmTxQXiKth8PvcgIC6MyeICcQHiAnGBuAghvLy8eBDeePvRsYgLxAXiMgYVy8cMiUtcEQzD4EEQF4jLGJQRJ6fiMg4ZkcXlii2uqfKB4x+43BjoRfXzY2JcFteXffv2zW3t/7LZbF6/3m634Xg8elCMhZ/Ttq2wPuCzu8T1pbHH+xRex6efiOtT3Gl7PRchcYkr8kqPuK7iDWlcjMQF4sqLU0Irl7hAXCAuQFwgruy4veRz/FGzuBCXuO5tv997EBCXK/H9R2j3dYnral4sVnlxRbTdbj0IV3CzpLi+9KJxaugCJK5IdrudB+E/9H1v1RLX7+29np6erGC/COtwOHggPuANaq4I7Pn5ObRtG+bzedF/MT8MQ9jtdg58xHVbh8MhPD8/h7quQ1VVYb1eF/OzPz09CcpYmGYl8zMjrkj8khlxcZN9FuIiAu+RLy57EMRlXLK/FBf/q5Q/WBWXuLzoIq3ORmBx2XdF4DBDXHfT9/2kf77T6eRJFpcXn5FQXJMbDae6erndRlxWL6uWuKxeVi1x8WmHw2Eyv1Tu+96qJS5X+xjjoDuMxTXK8TDnN2y53GWMuEbpeDxmG5jb98UlsAgrltv4xZVVYLmcIFqxxAXiAsQF4gJxAeICcYG4AHGBuEBcgLhAXCAuQFwgrpw1TRPm83kW3+tsNgt1XXvSIvCB4zeOarFYhK7rsvmeV6tVCOGf99Bw46S4RqOu6zCbzV5fpLnqui50XReGYQj7/T4cj0dPrrjuF9VyucxqlfpMZCH8/R6Gp9PJaiYuo1+skVFk4jL6JdiXGRnFJaoEI6N35xWX0c/IKC6rlJFRXFYpPhgZrWaFxmWVspqJK0JUU/zdlNVMXFYpq1lRq9lk47KXspqJS1DFr2ZTDS37uIx9xkZxWaUobGzMLq62ba1SVjNxiYpbrma5RfYgKnKMLIe7ph9EhcgKiatpmrBer72CyD6yB1EhsonG5e/9uHVkY7mR80FUTM1lr77dbu96sniXuBxWkMJlm3GvyB5ERQmR3WM/luztrJumERZ33Y9tNpuk/0/vFU9RUr4vfrK4qqryzFKUZHHl8qkfTFvKi3yyuBy5I67M51wobiyEMUi5PUkSl8MMxiLl9kRcFCfVNsVYCDnH5RieMUk1SSWJyzE84sp4voWxTVL2XJBrXE4KGZtU2xRxUaQU25XocTkpZIxSXPTtuSDXuBzDY+XKdK6FsW5XjIUUKcVEFTUuJ4XYc4mLAsXetkSNyzE8Yxb74h81LieFGAvBypVPXI7hGbvY25ZocTnMYOxib1uMhRQt5oRl5YLc4nIMTw5iLgLR4nIMj7gym2Oh+LEQchBz+xIlLocZ5CLm9kVcFC/WNsZYCDmtXI7hyUmsSStKXI7hEVcIfwE3vW4pmErq7wAAAABJRU5ErkJggg==\"","import React, { useContext } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport _ from \"lodash\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport empty from \"../../../images/empty.png\";\r\n\r\nexport const ChatCard = (props) => {\r\n    const { conn, activeChat, setActiveChat } = useContext(ChatEngineContext);\r\n    const { chat } = props;\r\n\r\n\r\n\r\n    const capitalize = (str, lower = true) => {\r\n        return (lower ? str.toLowerCase() : str).replace(\r\n            /(?:^|\\s|[\"'([{])+\\S/g,\r\n            (match) => match.toUpperCase()\r\n        );\r\n    };\r\n\r\n    if (!conn || conn === null) return <div />;\r\n    if (!chat) return <div />;\r\n    // This function allows blue dot to appear when new message comes\r\n\r\n    function readLastMessage(chat) {\r\n        let readLastMessage = true;\r\n        chat.people.map((chat_person) => {\r\n            if (conn.userName === chat_person.person.username) {\r\n                readLastMessage = chat.last_message.id === chat_person.last_read;\r\n            }\r\n        });\r\n        return readLastMessage;\r\n    }\r\n\r\n    const extraStyle = activeChat === chat.id ? styles.activeChat : {};\r\n    const otherPerson = chat.people.find(\r\n        (person) => person.person.username !== conn.userName\r\n    );\r\n    const convertedUsername = otherPerson ? otherPerson.person.username : \"\";\r\n    const title = otherPerson\r\n        ? capitalize(decodeURIComponent(convertedUsername))\r\n        : \"\";\r\n\r\n    let lastMessage = chat.last_message.text;\r\n    if (!lastMessage) {\r\n        lastMessage =\r\n            chat.last_message.attachments.length > 0\r\n                ? `${chat.last_message.attachments.length} image${chat.last_message.attachments.length > 1 ? \"s\" : \"\"\r\n                }`\r\n                : \"Say hello!\";\r\n    }\r\n    const isToday = (someDate) => {\r\n        const today = new Date()\r\n        return someDate.getDate() == today.getDate() &&\r\n            someDate.getMonth() == today.getMonth() &&\r\n            someDate.getFullYear() == today.getFullYear()\r\n    }\r\n    function getDateTime(date) {\r\n        if (!date) return ''\r\n        \r\n        date = date.replace(' ', 'T')\r\n     \r\n    \r\n        const year = date.substr(0,4)\r\n        const month = date.substr(5,2)\r\n        const day = date.substr(8,2)\r\n        const hour = date.substr(11,2)\r\n        const minute = date.substr(14,2)\r\n        const second = date.substr(17,2)\r\n        \r\n        var d = new Date(`${year}-${month}-${day}T${hour}:${minute}:${second}`)\r\n\r\n        let offset = (-(d.getTimezoneOffset())/60)\r\n    \r\n\r\n        d.setHours(d.getHours() + offset)\r\n        return d\r\n    }\r\n    function timeSinceDate(date) {\r\n       \r\n        if (!date) return ''\r\n\r\n\r\n        let convertedDate = getDateTime(date)\r\n      \r\n   \r\n        \r\n  \r\n\r\n       \r\n        \r\n        let sent = convertedDate.toString()\r\n       \r\n        const dayStr = sent.substr(3, 7)\r\n        const timeStr = sent.substr(15, 6)\r\n\r\n        if (isToday(convertedDate)) {\r\n\r\n            return timeStr\r\n        } else {\r\n            return dayStr\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div\r\n            onClick={() => setActiveChat(chat.id)}\r\n            style={{ ...styles.chatContainer, ...extraStyle }}\r\n            className={`ce-chat-card ${activeChat === chat.id && \"ce-active-chat-card\"\r\n                }`}\r\n        >\r\n            {otherPerson && otherPerson.person.avatar ? (\r\n                <div className=\"avatar-online\">\r\n                    <div\r\n                        className='ce-avatar-status'\r\n                        style={{\r\n                            ...styles.status,\r\n                            ...{ backgroundColor: otherPerson.person.is_online ? '#52c41a' : '#f5222d' }\r\n                        }}\r\n                    />\r\n                    <img\r\n                        src={otherPerson.person.avatar}\r\n                        style={{ borderRadius: \"50%\", width: \"40px\" }}\r\n                    />\r\n                </div>\r\n            ) : (\r\n                <div className=\"avatar-online\">\r\n                    <div\r\n                        className='ce-avatar-status'\r\n                        style={{\r\n                            ...styles.status,\r\n                            ...{ backgroundColor: otherPerson && otherPerson.person.is_online ? '#52c41a' : '#f5222d' }\r\n                        }}\r\n                    />\r\n                    <img\r\n                        src={empty}\r\n                        className=\"chat-card-avatar\"\r\n                        style={{ borderRadius: \"50%\", width: \"40px\" }}\r\n                    />\r\n\r\n                </div>\r\n\r\n            )}\r\n\r\n            <div className=\"chat-card-info\">\r\n                <div\r\n                    style={styles.titleText}\r\n                    className=\"ce-chat-title-text\"\r\n                    id={`ce-chat-card-title-${title}`}\r\n                >\r\n                    {title}\r\n\r\n\r\n                </div>\r\n\r\n                <div style={{ width: \"100%\" }} className=\"ce-chat-subtitle\">\r\n                    <div\r\n                        style={styles.messageText}\r\n                        className=\"ce-chat-subtitle-text ce-chat-subtitle-message\"\r\n                    >\r\n                        {lastMessage}\r\n                    </div>\r\n\r\n                   \r\n                </div>\r\n            </div>\r\n            <div className=\"chat-card-activity\">\r\n                <div className=\"chat-card-activity-time\">\r\n                    {\r\n                        chat.last_message.created && chat.last_message.created.length > 0 ?\r\n                            `${timeSinceDate(chat.last_message.created)}` :\r\n                            ''\r\n                    }\r\n\r\n                </div>\r\n                {!readLastMessage(chat) && (\r\n                    <div\r\n                        className=\"ce-chat-unread-dot\"\r\n                        style={{\r\n                            width: \"12px\",\r\n                            height: \"12px\",\r\n                            borderRadius: \"6px\",\r\n                            backgroundColor: \"var(--own-msg-color)\",\r\n                            display: \"inline-block\",\r\n                            marginTop: '15px',\r\n                            marginLeft: '10px'\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    chatContainer: {\r\n        padding: \"16px\",\r\n        paddingBottom: \"12px\",\r\n        cursor: \"pointer\",\r\n    },\r\n    titleText: {\r\n        fontWeight: \"500\",\r\n        paddingBottom: \"4px\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n    },\r\n    status: {\r\n        width: '8px',\r\n        height: '8px',\r\n        borderRadius: '100%',\r\n        border: '2px solid #d3d8e4de',\r\n        position: 'absolute',\r\n        top: '35px'\r\n    },\r\n    messageText: {\r\n        width: \"100%\",\r\n        color: \"var(--gray-text)\",\r\n        fontSize: \"13px\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        display: \"inline-block\",\r\n    },\r\n    activeChat: {\r\n        backgroundColor: \"#d9d9d9\",\r\n        border: \"4px solid white\",\r\n        borderRadius: \"12px\",\r\n    },\r\n};\r\n\r\nexport default ChatCard;\r\n","import AvatarEditor from \"react-avatar-editor\";\r\nimport { Image } from \"semantic-ui-react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport React, { useContext } from \"react\";\r\n\r\nexport const ChatAvatar = ({ file, close, onSubmit, crop = false, username, userstatus }) => {\r\n\r\n  const { conn } = useContext(ChatEngineContext);\r\n  const [imageSrc, setImageSrc] = useState(\"\");\r\n  const cropRef = useRef();\r\n  const [newUsername, setNewUsername] = useState(username);\r\n  const [newStatus, setNewStatus] = useState(userstatus);\r\n\r\n  \r\nconsole.log(username, userstatus)\r\n\r\n  useEffect(() => {\r\n    const fr = new FileReader();\r\n    fr.onload = () => setImageSrc(fr.result);\r\n    fr.readAsDataURL(file);\r\n  }, [file]);\r\n\r\n  return (\r\n    <div className=\"chat-new-avatar\">\r\n      {crop ? (\r\n        <AvatarEditor\r\n          ref={cropRef}\r\n          width={100}\r\n          height={100}\r\n          border={40}\r\n          borderRadius={50}\r\n          image={imageSrc}\r\n        />\r\n      ) : (\r\n        <Image size=\"medium\" src={imageSrc} alt=\"preview\" />\r\n      )}\r\n      \r\n        \r\n      <div className=\"image-upload-actions\">\r\n        <button className=\"cancel\" onClick={close}>\r\n          Cancel\r\n        </button>\r\n        <button\r\n          className=\"submit\"\r\n          onClick={() => {\r\n            if (crop && cropRef) {\r\n              const canvas = cropRef.current\r\n                .getImageScaledToCanvas()\r\n                .toDataURL();\r\n              fetch(canvas)\r\n                .then((res) => res.blob())\r\n                .then((blob) => onSubmit(blob, newUsername, newStatus));\r\n            } else {\r\n              onSubmit();\r\n            }\r\n          }}\r\n        >\r\n          Upload\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import AvatarEditor from \"react-avatar-editor\";\r\nimport { Image } from \"semantic-ui-react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport React, { useContext } from \"react\";\r\n\r\nexport const EditProfile = ({ username, userstatus, close, onSubmit }) => {\r\n\r\n  const [newUsername, setNewUsername] = useState(username);\r\n  const [newStatus, setNewStatus] = useState(userstatus);\r\n\r\nreturn (\r\n\r\n    <div className=\"edit-profile\">\r\n      \r\n   \r\n    <div className=\"edit-name-input\">\r\n  <input\r\n          placeholder=\"New status\"\r\n          value={newStatus}\r\n   onChange={(e) => setNewStatus(e.target.value)}\r\n\r\n        />\r\n     </div>\r\n\r\n\r\n    \r\n      <div className=\"image-upload-actions\">\r\n       \r\n        <button\r\n          className=\"submit\"\r\n          onClick={() => {\r\n            if (true) {\r\n                onSubmit( newUsername, newStatus);\r\n            } else {\r\n              onSubmit();\r\n            }\r\n          }}\r\n        >\r\n          Upload\r\n        </button>\r\n         <button className=\"cancel\" onClick={close}>\r\n          Cancel\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport { useAuth } from \"context/AuthContext.js\";\r\nimport { Icon, IconGroup, Loader } from \"semantic-ui-react\";\r\nimport { ChatAvatar } from \"./ChatAvatar\";\r\nimport { EditProfile } from \"./EditProfile\";\r\nimport empty from \"../../../images/empty.png\";\r\nimport { LeftOutlined, DownOutlined, UserOutlined, DeleteOutlined, LogoutOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport { fb } from \"service\";\r\n\r\nexport const ChatProfile = (props) => {\r\n  const { userObject, convertedName } = useAuth();\r\n  const [avatarURL, setAvatarURL] = useState();\r\n  const [userStatus, setUserStatus] = useState(\"New User\");\r\n  const inputRef = useRef(null);\r\n  const [image, setImage] = useState();\r\n  const [avatarState, setAvatarState] = useState(false);\r\n  const [avatarVisibility, setAvatarVisibility] = useState(true);\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const { chat, name, secret } = props;\r\n\r\n  const capitalize = (str, lower = true) => {\r\n    return (lower ? str.toLowerCase() : str).replace(\r\n      /(?:^|\\s|[\"'([{])+\\S/g,\r\n      (match) => match.toUpperCase()\r\n    );\r\n  };\r\n\r\n  const onFileAttach = (file) => {\r\n    setImage(file);\r\n  };\r\n\r\n  function deleteActiveChat(chatID) {\r\n    var myHeaders = new Headers();\r\n\r\n    let otherPerson = chat.people.find(\r\n      (person) => person.person.username !== name\r\n    )\r\n      ? chat.people.find((person) => person.person.username !== name)\r\n      : chat.people.find((person) => person.person.username == name);\r\n\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", name);\r\n    myHeaders.append(\"User-Secret\", secret);\r\n\r\n    var raw = `{\\n    \\\"username\\\": \\\"${name}\\\"\\n}`;\r\n    var raw2 = `{\\n    \\\"username\\\": \\\"${otherPerson.person.username}\\\"\\n}`;\r\n\r\n    var firstUser = {\r\n      method: \"DELETE\",\r\n      headers: myHeaders,\r\n      body: raw,\r\n      redirect: \"follow\",\r\n    };\r\n    var secondUser = {\r\n      method: \"DELETE\",\r\n      headers: myHeaders,\r\n      body: raw2,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(`https://api.chatengine.io/chats/${chatID}/people/`, firstUser)\r\n      .then((response) => response.text())\r\n      .then((result) => console.log(result))\r\n      .catch((error) => console.log(\"error\", error));\r\n\r\n    fetch(`https://api.chatengine.io/chats/${chatID}/people/`, secondUser)\r\n      .then((response) => response.text())\r\n      .then((result) => console.log(result))\r\n      .catch((error) => console.log(\"error\", error));\r\n  }\r\n\r\n\r\n  const updateAv = () => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", convertedName);\r\n    myHeaders.append(\"User-Secret\", userObject.uid);\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"avatar\", image, image.name);\r\n\r\n    const requestOptions = {\r\n      method: \"PATCH\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions)\r\n      .then(() => {\r\n        setAvatarState(false)\r\n        setAvatarURL()\r\n      }\r\n      )\r\n  };\r\n\r\n  const updateProfile = (newUsername, newStatus) => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", convertedName);\r\n    myHeaders.append(\"User-Secret\", userObject.uid);\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"name\", newUsername);\r\n    formdata.append(\"first_name\", newStatus);\r\n\r\n    const requestOptions = {\r\n      method: \"PATCH\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions).then(() => {\r\n      setAvatarState(false);\r\n\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", props.conn.userName);\r\n    myHeaders.append(\"User-Secret\", props.conn.userSecret);\r\n\r\n    var requestOptions = {\r\n      method: \"GET\",\r\n      headers: myHeaders,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions)\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n\r\n        setAvatarURL(result.avatar);\r\n        setAvatarState(true);\r\n        setUserStatus(result.first_name)\r\n      });\r\n  }, [avatarState]);\r\n\r\n  return (\r\n    <div className=\"left-rail-header\">\r\n      <input\r\n        type=\"file\"\r\n        ref={inputRef}\r\n        className=\"image-input\"\r\n        accept=\"image/jpeg,image/png\"\r\n        onChange={(e) => {\r\n          const file = e.target?.files?.[0];\r\n          if (file) {\r\n            onFileAttach(file);\r\n            setAvatarVisibility(false);\r\n          }\r\n        }}\r\n      />\r\n\r\n      {!!image && (\r\n        <ChatAvatar\r\n          crop\r\n          file={image}\r\n          header=\"Set Your Avatar\"\r\n          mode=\"message\"\r\n          username={props.conn.userName}\r\n          userstatus={userStatus}\r\n          onSubmit={(croppedImage) => {\r\n            setImage(croppedImage);\r\n            updateAv();\r\n            setImage(null);\r\n            setAvatarVisibility(true);\r\n          }}\r\n          close={() => {\r\n            setImage(null)\r\n            setAvatarVisibility(true);\r\n          }}\r\n        />\r\n      )}\r\n\r\n\r\n      {userObject.uid && avatarVisibility ? (\r\n        <div className=\"current-user-info\">\r\n          <IconGroup\r\n            onClick={() => {\r\n              const input = inputRef.current;\r\n              if (input) {\r\n                input.value = \"\";\r\n                input.click();\r\n              }\r\n            }}\r\n            className=\"user-avatar\"\r\n            size=\"large\"\r\n          >\r\n            {avatarState ? (\r\n              <>\r\n                {avatarURL ? (\r\n                  <img\r\n                    src={avatarURL}\r\n                    style={{ borderRadius: \"50%\", width: \"120px\" }}\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={empty}\r\n                    style={{ borderRadius: \"50%\", width: \"120px\" }}\r\n                  />\r\n                )}\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n\r\n            <Icon corner name=\"camera\" inverted circular />\r\n          </IconGroup>\r\n\r\n\r\n        </div>\r\n      ) : (\r\n        <div className=\"user-loading\">\r\n          <Loader active size=\"small\" />\r\n        </div>\r\n      )}\r\n      <div className=\"current-username\">\r\n        <div className=\"username-border\">\r\n          {capitalize(decodeURIComponent(convertedName))}\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div className=\"options-icons-container\">\r\n\r\n        {editing ?\r\n          <EditProfile\r\n            username={props.conn.userName}\r\n            userstatus={userStatus}\r\n            close={() => {\r\n              setEditing(false)\r\n\r\n            }}\r\n            onSubmit={(newUsername, newStatus) => {\r\n              updateProfile(newUsername, newStatus)\r\n              setEditing(false)\r\n            }}\r\n          />\r\n          :\r\n          <>\r\n            {userStatus ?\r\n              <div className=\"user-status\">\r\n                {userStatus} </div>\r\n\r\n              : <div className=\"user-status\">\r\n                --- </div>\r\n\r\n\r\n\r\n            }</>}\r\n\r\n        <div className=\"options-icons\">\r\n          <EditOutlined onClick={() => setEditing(true)} />\r\n          <DeleteOutlined onClick={() => {\r\n            if (window.confirm(\"Press OK if you want to delete active chat. Conversation with this person will be lost\")) {\r\n              deleteActiveChat(chat.id)\r\n\r\n            }\r\n\r\n\r\n\r\n          }} />\r\n          <LogoutOutlined onClick={() => {\r\n            if (window.confirm(\"Press OK if you want to logout\")) {\r\n              fb.auth.signOut().then(console.log(\"logged out\"))\r\n\r\n            }\r\n\r\n\r\n\r\n          }} />\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import AvatarEditor from \"react-avatar-editor\";\r\nimport { Image } from \"semantic-ui-react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport React, { useContext } from \"react\";\r\n\r\nexport const ChatAvatar = ({ file, close, onSubmit, crop = false, username, userstatus }) => {\r\n\r\n  const { conn } = useContext(ChatEngineContext);\r\n  const [imageSrc, setImageSrc] = useState(\"\");\r\n  const cropRef = useRef();\r\n  const [newUsername, setNewUsername] = useState(username);\r\n  const [newStatus, setNewStatus] = useState(userstatus);\r\n\r\n  \r\nconsole.log(username, userstatus)\r\n\r\n  useEffect(() => {\r\n    const fr = new FileReader();\r\n    fr.onload = () => setImageSrc(fr.result);\r\n    fr.readAsDataURL(file);\r\n  }, [file]);\r\n\r\n  return (\r\n    <div className=\"chat-new-avatar\">\r\n      {crop ? (\r\n        <AvatarEditor\r\n          ref={cropRef}\r\n          width={100}\r\n          height={100}\r\n          border={40}\r\n          borderRadius={50}\r\n          image={imageSrc}\r\n        />\r\n      ) : (\r\n        <Image size=\"medium\" src={imageSrc} alt=\"preview\" />\r\n      )}\r\n      \r\n        \r\n      <div className=\"image-upload-actions\">\r\n        <button className=\"cancel\" onClick={close}>\r\n          Cancel\r\n        </button>\r\n        <button\r\n          className=\"submit\"\r\n          onClick={() => {\r\n            if (crop && cropRef) {\r\n              const canvas = cropRef.current\r\n                .getImageScaledToCanvas()\r\n                .toDataURL();\r\n              fetch(canvas)\r\n                .then((res) => res.blob())\r\n                .then((blob) => onSubmit(blob, newUsername, newStatus));\r\n            } else {\r\n              onSubmit();\r\n            }\r\n          }}\r\n        >\r\n          Upload\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import AvatarEditor from \"react-avatar-editor\";\r\nimport { Image } from \"semantic-ui-react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport React, { useContext } from \"react\";\r\n\r\nexport const EditProfile = ({ username, userstatus, close, onSubmit }) => {\r\n\r\n  const [newUsername, setNewUsername] = useState(username);\r\n  const [newStatus, setNewStatus] = useState(userstatus);\r\n\r\nreturn (\r\n\r\n    <div className=\"edit-profile\">\r\n      \r\n   \r\n    <div className=\"edit-name-input\">\r\n  <input\r\n          placeholder=\"New status\"\r\n          value={newStatus}\r\n   onChange={(e) => setNewStatus(e.target.value)}\r\n\r\n        />\r\n     </div>\r\n\r\n\r\n    \r\n      <div className=\"image-upload-actions\">\r\n       \r\n        <button\r\n          className=\"submit\"\r\n          onClick={() => {\r\n            if (true) {\r\n                onSubmit( newUsername, newStatus);\r\n            } else {\r\n              onSubmit();\r\n            }\r\n          }}\r\n        >\r\n          Upload\r\n        </button>\r\n         <button className=\"cancel\" onClick={close}>\r\n          Cancel\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/loading.3726f6da.svg\";","import { useRef, useState, useEffect } from \"react\";\r\nimport { useAuth } from \"context/AuthContext.js\";\r\nimport { Icon, IconGroup, Loader } from \"semantic-ui-react\";\r\nimport { ChatAvatar } from \"./ChatAvatar\";\r\nimport { EditProfile } from \"./EditProfile\";\r\nimport empty from \"../../../images/empty.png\";\r\nimport { LeftOutlined, DownOutlined, UserOutlined, DeleteOutlined, LogoutOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport { fb } from \"service\";\r\nimport loadingAnimation from \"../../../images/loading.svg\";\r\n\r\nexport const ChatProfile = (props) => {\r\n  const { userObject, convertedName } = useAuth();\r\n  const [avatarURL, setAvatarURL] = useState();\r\n  const [userStatus, setUserStatus] = useState(\"\");\r\n  const inputRef = useRef(null);\r\n  const [image, setImage] = useState();\r\n  const [avatarState, setAvatarState] = useState(false);\r\n  const [avatarVisibility, setAvatarVisibility] = useState(true);\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const { chat, name, secret } = props;\r\n\r\n  const capitalize = (str, lower = true) => {\r\n    return (lower ? str.toLowerCase() : str).replace(\r\n      /(?:^|\\s|[\"'([{])+\\S/g,\r\n      (match) => match.toUpperCase()\r\n    );\r\n  };\r\n\r\n  const onFileAttach = (file) => {\r\n    setImage(file);\r\n  };\r\n\r\n  function deleteActiveChat(chatID) {\r\n    var myHeaders = new Headers();\r\n\r\n    let otherPerson = chat.people.find(\r\n      (person) => person.person.username !== name\r\n    )\r\n      ? chat.people.find((person) => person.person.username !== name)\r\n      : chat.people.find((person) => person.person.username == name);\r\n\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", name);\r\n    myHeaders.append(\"User-Secret\", secret);\r\n\r\n    var raw = `{\\n    \\\"username\\\": \\\"${name}\\\"\\n}`;\r\n    var raw2 = `{\\n    \\\"username\\\": \\\"${otherPerson.person.username}\\\"\\n}`;\r\n\r\n    var firstUser = {\r\n      method: \"DELETE\",\r\n      headers: myHeaders,\r\n      body: raw,\r\n      redirect: \"follow\",\r\n    };\r\n    var secondUser = {\r\n      method: \"DELETE\",\r\n      headers: myHeaders,\r\n      body: raw2,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(`https://api.chatengine.io/chats/${chatID}/people/`, firstUser)\r\n      .then((response) => response.text())\r\n      .then((result) => console.log(result))\r\n      .catch((error) => console.log(\"error\", error));\r\n\r\n    fetch(`https://api.chatengine.io/chats/${chatID}/people/`, secondUser)\r\n      .then((response) => response.text())\r\n      .then((result) => console.log(result))\r\n      .catch((error) => console.log(\"error\", error));\r\n  }\r\n\r\n\r\n  const updateAv = () => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", convertedName);\r\n    myHeaders.append(\"User-Secret\", userObject.uid);\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"avatar\", image, image.name);\r\n\r\n    const requestOptions = {\r\n      method: \"PATCH\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions)\r\n      .then(() => {\r\n        setAvatarState(false)\r\n        setAvatarURL()\r\n      }\r\n      )\r\n  };\r\n\r\n  const updateProfile = (newUsername, newStatus) => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", convertedName);\r\n    myHeaders.append(\"User-Secret\", userObject.uid);\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"name\", newUsername);\r\n    formdata.append(\"first_name\", newStatus);\r\n\r\n    const requestOptions = {\r\n      method: \"PATCH\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions).then(() => {\r\n      setAvatarState(false);\r\n\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", props.conn.userName);\r\n    myHeaders.append(\"User-Secret\", props.conn.userSecret);\r\n\r\n    var requestOptions = {\r\n      method: \"GET\",\r\n      headers: myHeaders,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/users/me/\", requestOptions)\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n\r\n        setAvatarURL(result.avatar);\r\n        setAvatarState(true);\r\n        setUserStatus(result.first_name)\r\n      });\r\n  }, [avatarState]);\r\n\r\n  return (\r\n    <div className=\"chat-profile-container\">\r\n      <input\r\n        type=\"file\"\r\n        ref={inputRef}\r\n        className=\"image-input\"\r\n        accept=\"image/jpeg,image/png\"\r\n        onChange={(e) => {\r\n          const file = e.target?.files?.[0];\r\n          if (file) {\r\n            onFileAttach(file);\r\n            setAvatarVisibility(false);\r\n          }\r\n        }}\r\n      />\r\n\r\n      {!!image && (\r\n        <ChatAvatar\r\n          crop\r\n          file={image}\r\n          header=\"Set Your Avatar\"\r\n          mode=\"message\"\r\n          username={props.conn.userName}\r\n          userstatus={userStatus}\r\n          onSubmit={(croppedImage) => {\r\n            setImage(croppedImage);\r\n            updateAv();\r\n            setImage(null);\r\n            setAvatarVisibility(true);\r\n          }}\r\n          close={() => {\r\n            setImage(null)\r\n            setAvatarVisibility(true);\r\n          }}\r\n        />\r\n      )}\r\n\r\n\r\n      {userObject.uid && avatarVisibility ? (\r\n        <div className=\"current-user-info\">\r\n          <IconGroup\r\n            onClick={() => {\r\n              const input = inputRef.current;\r\n              if (input) {\r\n                input.value = \"\";\r\n                input.click();\r\n              }\r\n            }}\r\n            className=\"user-avatar\"\r\n            size=\"large\"\r\n          >\r\n            {avatarState ? (\r\n              <>\r\n                {avatarURL ? (\r\n                  <img\r\n                    src={avatarURL}\r\n                    style={{ borderRadius: \"50%\", width: \"120px\" }}\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={empty}\r\n                    style={{ borderRadius: \"50%\", width: \"120px\" }}\r\n                  />\r\n                )}\r\n              </>\r\n            ) : (\r\n            <img src={loadingAnimation} alt=\"\"  />\r\n            )}\r\n\r\n            <Icon corner name=\"camera\" inverted circular />\r\n          </IconGroup>\r\n\r\n\r\n        </div>\r\n      ) : (\r\n        <div className=\"user-loading\">\r\n          <Loader active size=\"small\" />\r\n        </div>\r\n      )}\r\n      <div className=\"chat-profile-info\">\r\n        <div className=\"current-username\">\r\n          <div className=\"username-border\">\r\n            {capitalize(decodeURIComponent(convertedName))}\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"options-icons-container\">\r\n\r\n          {editing ?\r\n            <EditProfile\r\n              username={props.conn.userName}\r\n              userstatus={userStatus}\r\n              close={() => {\r\n                setEditing(false)\r\n\r\n              }}\r\n              onSubmit={(newUsername, newStatus) => {\r\n                updateProfile(newUsername, newStatus)\r\n                setEditing(false)\r\n              }}\r\n            />\r\n            :\r\n            <>\r\n              {userStatus ?\r\n                <div className=\"user-status\">\r\n                  {userStatus} </div>\r\n\r\n                : <div className=\"user-status\">\r\n                  - </div>\r\n\r\n\r\n\r\n              }</>}\r\n\r\n          <div className=\"options-icons\">\r\n            <EditOutlined onClick={() => setEditing(true)} />\r\n            <DeleteOutlined onClick={() => {\r\n              if (window.confirm(\"Press OK if you want to delete active chat. Conversation with this person will be lost\")) {\r\n                deleteActiveChat(chat.id)\r\n\r\n              }\r\n\r\n\r\n\r\n            }} />\r\n            <LogoutOutlined onClick={() => {\r\n              if (window.confirm(\"Press OK if you want to logout\")) {\r\n                fb.auth.signOut().then(console.log(\"logged out\"))\r\n\r\n              }\r\n\r\n\r\n\r\n            }} />\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport { ChatList } from 'react-chat-engine';\r\n\r\nconst ChatLoader = props => {\r\n    function useOnScreen(ref) {\r\n        const [isIntersecting, setIntersecting] = useState(false)\r\n\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n                setIntersecting(entry.isIntersecting)\r\n                if (entry.isIntersecting) {\r\n                    props.onVisible()\r\n                }\r\n            }\r\n        )\r\n\r\n        useEffect(() => {\r\n            observer.observe(ref.current)\r\n            // Remove the observer as soon as the component is unmounted\r\n            return () => { observer.disconnect() }\r\n        }, [])\r\n\r\n        return isIntersecting\r\n    }\r\n\r\n    const ref = useRef()\r\n    const isVisible = useOnScreen(ref)\r\n\r\n    return <div ref={ref} />\r\n}\r\n\r\nexport default ChatLoader","import React, { useState, useContext } from \"react\";\r\nimport { getOrCreateChat } from \"react-chat-engine\";\r\nimport { useAuth } from \"context/AuthContext.js\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport { newChat } from \"react-chat-engine\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\n\r\nconst NewChatForm = (props) => {\r\n\r\n  const { conn } = useContext(ChatEngineContext);\r\n  const [value, setValue] = useState(\"\");\r\n  const [selected, setSelected] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [newChatError, setNewChatError] = useState(\"\");\r\n  const { userObject, convertedName } = useAuth();\r\n\r\n  function lowerLetters(str) {\r\n    return str.toLowerCase();\r\n  }\r\n  function capitalize(str) {\r\n    if (/\\s/.test(str)) {\r\n      return str.replace(/\\b\\w/g, (l) => l.toUpperCase());\r\n    } else return str;\r\n  }\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    if (value.trim().length > 0) {\r\n      newChat(conn, { title: value }, () => setSelected(false));\r\n    }\r\n\r\n    setValue(\"\");\r\n  }\r\n\r\n  function createDirectChat(creds, otherPerson) {\r\n    if (creds) {\r\n      const newName = otherPerson\r\n        ? otherPerson\r\n        : encodeURIComponent(lowerLetters(username));\r\n\r\n      if (newName == convertedName) {\r\n        setNewChatError(\"This is your own nickname!\");\r\n        setTimeout(() => setNewChatError(\"\"), 5000);\r\n      } else {\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"PRIVATE-KEY\", \"c4d418e8-fa2d-4adc-be73-2f0dc8bf19ac\");\r\n\r\n        var requestOptions = {\r\n          method: \"GET\",\r\n          headers: myHeaders,\r\n          redirect: \"follow\",\r\n        };\r\n\r\n        fetch(\"https://api.chatengine.io/users/\", requestOptions)\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            if (data.some((x) => x.username == newName)) {\r\n              getOrCreateChat(\r\n                conn,\r\n                { is_direct_chat: true, usernames: [newName] },\r\n                () => {\r\n                  setUsername(\"\");\r\n                  setNewChatError(\"\");\r\n                }\r\n              );\r\n            } else {\r\n              setNewChatError(\"There is no such user\");\r\n              setTimeout(() => setNewChatError(\"\"), 5000);\r\n            }\r\n          });\r\n      }\r\n\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          createDirectChat(props.creds);\r\n        }}\r\n      >\r\n        <input\r\n          placeholder=\"Add new chat\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n        \r\n        />\r\n        \r\n      <PlusOutlined  onClick={() => {\r\n          createDirectChat(props.creds);\r\n      }}/>\r\n\r\n       \r\n      </form>\r\n      <div className=\"newChatError\">{newChatError}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewChatForm;\r\n\r\nconst styles = {\r\n  newChatContainer: {\r\n    padding: \"16px 14px\",\r\n    backgroundColor: \"white\",\r\n  },\r\n};\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\n\r\nimport { ChatEngineContext, getLatestChats, getChatsBefore } from 'react-chat-engine'\r\nimport { ChatProfile } from \"./ChatProfile\";\r\nimport { BgColorsOutlined, CommentOutlined, LeftOutlined, DownOutlined, UserOutlined, DeleteOutlined, LogoutOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport { fb } from \"service\";\r\nimport _ from 'lodash'\r\nimport loadingAnimation from \"../../../images/loading.svg\";\r\nimport chatLogo from \"../../../images/chatlogo.png\";\r\nimport ChatLoader from '../ChatLoader'\r\nimport NewChatForm from './NewChatForm'\r\nimport ChatCard from './ChatCard'\r\n\r\n\r\nlet count = 50\r\nconst interval = 75\r\n\r\nconst ChatList = props => {\r\n    const didMountRef = useRef(false)\r\n    const [loadChats, setLoadChats] = useState(false)\r\n    const [hasMoreChats, setHasMoreChats] = useState(true)\r\n    const [editingProfile, setEditingProfile] = useState(false)\r\n    const { conn, chats, setChats, setActiveChat, activeChat } = useContext(ChatEngineContext)\r\n    const chat = chats && chats[activeChat];\r\n   \r\n    const [chatsHeight, setChatsHeight] = useState(\"440px\")\r\n\r\n    const name = props.chatAppState.userName\r\n    const secret = props.chatAppState.userSecret\r\n\r\n    function deleteActiveChat(chatID) {\r\n        var myHeaders = new Headers();\r\n       \r\n        let otherPerson = chat.people.find(\r\n            (person) => person.person.username !== name\r\n        )\r\n            ? chat.people.find((person) => person.person.username !== name)\r\n            : chat.people.find((person) => person.person.username == name);\r\n\r\n        myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n        myHeaders.append(\"User-Name\", name);\r\n        myHeaders.append(\"User-Secret\", secret);\r\n\r\n        var raw = `{\\n    \\\"username\\\": \\\"${name}\\\"\\n}`;\r\n        var raw2 = `{\\n    \\\"username\\\": \\\"${otherPerson.person.username}\\\"\\n}`;\r\n\r\n        var firstUser = {\r\n            method: \"DELETE\",\r\n            headers: myHeaders,\r\n            body: raw,\r\n            redirect: \"follow\",\r\n        };\r\n        var secondUser = {\r\n            method: \"DELETE\",\r\n            headers: myHeaders,\r\n            body: raw2,\r\n            redirect: \"follow\",\r\n        };\r\n\r\n        fetch(`https://api.chatengine.io/chats/${chatID}/people/`, firstUser)\r\n            .then((response) => response.text())\r\n            .then((result) => console.log(result))\r\n            .catch((error) => console.log(\"error\", error));\r\n\r\n        fetch(`https://api.chatengine.io/chats/${chatID}/people/`, secondUser)\r\n            .then((response) => response.text())\r\n            .then((result) => console.log(result))\r\n            .catch((error) => console.log(\"error\", error));\r\n    }\r\n    function getDateTime(date, offset) {\r\n        if (!date) return ''\r\n\r\n        date = date.replace(' ', 'T')\r\n        offset = offset ? offset : 0\r\n\r\n        const year = date.substr(0, 4)\r\n        const month = date.substr(5, 2)\r\n        const day = date.substr(8, 2)\r\n        const hour = date.substr(11, 2)\r\n        const minute = date.substr(14, 2)\r\n        const second = date.substr(17, 2)\r\n\r\n        var d = new Date(`${year}-${month}-${day}T${hour}:${minute}:${second}`)\r\n        d.setHours(d.getHours() + offset)\r\n        return d\r\n    }\r\n\r\n    function renderChats(chats) {\r\n        return chats.map((chat, index) => {\r\n            if (!chat) {\r\n                return <div key={`chat_${index}`} />\r\n\r\n            } else if (props.chatAppState.renderChatCard) {\r\n                return <div key={`chat_${index}`}>{props.chatAppState.renderChatCard(chat, index)}</div>\r\n\r\n            } else {\r\n                return (\"\"\r\n                )\r\n            }\r\n        })\r\n    }\r\n\r\n    function sortChats(chats) {\r\n        return chats.sort((a, b) => {\r\n            const aDate = a.last_message && a.last_message.created ? getDateTime(a.last_message.created, props.chatAppState.offset) : getDateTime(a.created, props.chatAppState.offset)\r\n            const bDate = b.last_message && b.last_message.created ? getDateTime(b.last_message.created, props.chatAppState.offset) : getDateTime(b.created, props.chatAppState.offset)\r\n            return new Date(bDate) - new Date(aDate);\r\n        })\r\n    }\r\n\r\n    function onGetChats(chatList) {\r\n        const oldChats = chats !== null ? chats : {}\r\n        const newChats = _.mapKeys({ ...chatList }, 'id')\r\n        const allChats = { ...oldChats, ...newChats }\r\n        setChats(allChats);\r\n        (count && count > Object.keys(allChats).length) && setHasMoreChats(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!didMountRef.current) {\r\n            didMountRef.current = true\r\n\r\n            getLatestChats(\r\n                props,\r\n                count,\r\n                (chats) => {\r\n                    onGetChats(chats)\r\n                    const chatList = sortChats(chats)\r\n                    chatList.length > 0 && setActiveChat(chatList[0].id)\r\n                }\r\n            )\r\n        }\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        if (!activeChat) {\r\n            activeKURWA()\r\n        }\r\n    }, [chats])\r\n\r\n\r\n\r\n    const chatList = sortChats(\r\n        chats ?\r\n            Object.values(chats) :\r\n            [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}]\r\n    )\r\n    function activeKURWA() {\r\n        if (chatList) {\r\n            setActiveChat(chatList[0].id)\r\n        }\r\n\r\n    }\r\n    if (chats == null) return <div />;\r\n    return (\r\n        <div className=\"chat-left-wing\">\r\n            <div className=\"chat-bar\">\r\n                <div className=\"chat-bar-logo\">\r\n              <img src={chatLogo} alt=\"\" />\r\n                \r\n                </div>\r\n                <div className=\"chat-bar-options\">\r\n                    <div className=\"chat-bar-option\">\r\n                        <UserOutlined\r\n                            onClick={\r\n                                () => {\r\n                                    if (editingProfile) {\r\n                                        setEditingProfile(!editingProfile)\r\n                                        document.querySelector(\".ce-chats-container\").style.height = \"530px\"\r\n                                    }\r\n                                    else {\r\n                                        setEditingProfile(!editingProfile)\r\n                                        document.querySelector(\".ce-chats-container\").style.height = \"425px\"\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n\r\n                        />\r\n                    </div>\r\n                    <div className=\"chat-bar-option\">\r\n                    <BgColorsOutlined onClick={() => {\r\n                        document.querySelector(\".app\").classList.toggle(\"dark\")\r\n                    }}/>\r\n                    </div>\r\n                    <div className=\"chat-bar-option\">\r\n                        <DeleteOutlined onClick={() => {\r\n                            if (window.confirm(\"Press OK if you want to delete active chat. Conversation with this person will be lost\")) {\r\n                                deleteActiveChat(activeChat)\r\n\r\n                            }\r\n\r\n\r\n\r\n                        }} />\r\n                    </div>\r\n                    <div className=\"chat-bar-option\"> <LogoutOutlined onClick={() => {\r\n                        if (window.confirm(\"Press OK if you want to logout\")) {\r\n                            fb.auth.signOut().then(console.log(\"logged out\"))\r\n\r\n                        }\r\n\r\n\r\n\r\n                    }} /></div>\r\n                  \r\n                </div>\r\n\r\n            </div>\r\n            <div className=\"chat-left-wing-list\">\r\n                {editingProfile ?\r\n                    <ChatProfile\r\n                        chat={chat}\r\n                        conn={conn}\r\n                        name={props.chatAppState.userName}\r\n                        secret={props.chatAppState.userSecret}\r\n                    /> : \"\"}\r\n                <div style={styles.chatListContainer} className='ce-chat-list'>\r\n                    {\r\n                        props.chatAppState.renderNewChatForm ?\r\n                            props.chatAppState.renderNewChatForm(conn) :\r\n                            <NewChatForm onClose={props.chatAppState.onClose ? () => props.chatAppState.onClose() : undefined} />\r\n                    }\r\n                    <div style={styles.chatsContainer} className='ce-chats-container'>\r\n\r\n\r\n                        {renderChats(chatList)}\r\n\r\n\r\n                        {\r\n                            hasMoreChats && chatList.length > 0 &&\r\n                            <div>\r\n                                <ChatLoader onVisible={() => setLoadChats(true)} />\r\n                                <div style={{ height: '8px' }} />\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst styles = {\r\n    chatListContainer: {\r\n        maxHeight: '100vh',\r\n        overflow: 'scroll',\r\n        overflowX: 'hidden',\r\n        backgroundColor: 'white',\r\n        fontFamily: 'Avenir'\r\n    },\r\n    chatsContainer: {\r\n        width: '100%',\r\n        height: '530px',\r\n        borderRadius: '0px 0px 24px 24px'\r\n\r\n    },\r\n}\r\n\r\nexport default ChatList;","export default \"data:image/png;base64,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\"","import React, { useState } from \"react\";\r\nimport { MenuOutlined, CloseOutlined } from \"@ant-design/icons\";\r\nimport { ChatProfile } from \"../ChatSettings/ChatProfile\";\r\nimport ChatList from \"../ChatList/ChatList\";\r\n\r\nconst ChatListDrawer = (props) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const { chat } = props;\r\n\r\n   \r\n\r\n    return (\r\n        <div>\r\n            <MenuOutlined\r\n                onClick={() => setIsOpen(true)}\r\n                style={{ color: \"rgb(24, 144, 255)\", outline: \"none\" }}\r\n            />\r\n\r\n            {isOpen && (\r\n                <div style={styles.drawerContainer}>\r\n                    <CloseOutlined\r\n                        style={styles.closeIcon}\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n                    <ChatProfile chat={chat} conn={props.conn} />\r\n\r\n                    <ChatList  creds={props.creds} onChatClick={() => setIsOpen(false)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatListDrawer;\r\n\r\nconst styles = {\r\n    drawerContainer: {\r\n        position: \"fixed\",\r\n        zIndex: \"1\",\r\n        top: \"0px\",\r\n        left: \"0px\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: \"white\",\r\n        textAlign: \"left\",\r\n    },\r\n    closeIcon: {\r\n        position: \"absolute\",\r\n        left: \"28px\",\r\n        top: \"32px\",\r\n    },\r\n    titleContainer: {\r\n        width: \"100%\",\r\n        padding: \"24px 0px\",\r\n        textAlign: \"center\",\r\n        color: \"rgb(24, 144, 255)\",\r\n    },\r\n    titleText: {\r\n        fontSize: \"24px\",\r\n        fontWeight: \"600\",\r\n    },\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport ChatListDrawer from \"./ChatListDrawer\";\r\nimport { Row, Col } from \"react-grid-system\";\r\nimport { setConfiguration } from \"react-grid-system\";\r\nimport empty from \"../../../images/empty.png\";\r\n\r\nsetConfiguration({ maxScreenClass: \"xl\", gutterWidth: 0 });\r\n\r\nexport const ChatHeader = (props) => {\r\n    const { conn, chats, activeChat } = useContext(ChatEngineContext);\r\n\r\n    const capitalize = (str, lower = true) => {\r\n        return (lower ? str.toLowerCase() : str).replace(\r\n            /(?:^|\\s|[\"'([{])+\\S/g,\r\n            (match) => match.toUpperCase()\r\n        );\r\n    };\r\n\r\n    if (!chats || !activeChat || !chats[activeChat]) {\r\n        return <div />;\r\n    }\r\n\r\n    if (!conn || conn === null) {\r\n        return <div />;\r\n    }\r\n\r\n    const chat = chats[activeChat];\r\n    const otherPerson = chat.people.find(\r\n        (person) => person.person.username !== conn.userName\r\n    );\r\n    \r\n    const userStatus = (otherPerson) ? otherPerson.person.first_name : \"\"\r\n \r\n    const title = otherPerson\r\n        ? capitalize(decodeURIComponent(otherPerson.person.username))\r\n        : \"\";\r\n\r\n        function getDateTime(date) {\r\n            if (!date) return ''\r\n            \r\n            date = date.replace(' ', 'T')\r\n         \r\n        \r\n            const year = date.substr(0,4)\r\n            const month = date.substr(5,2)\r\n            const day = date.substr(8,2)\r\n            const hour = date.substr(11,2)\r\n            const minute = date.substr(14,2)\r\n            const second = date.substr(17,2)\r\n            \r\n            var d = new Date(`${year}-${month}-${day}T${hour}:${minute}:${second}`)\r\n            console.log(d)\r\n            let offset = (-(d.getTimezoneOffset())/60)\r\n            console.log(offset)\r\n    \r\n            d.setHours(d.getHours() + offset)\r\n            return d\r\n        }\r\n\r\n    function timeSinceDate(date) {\r\n        if (!date) return ''\r\n\r\n\r\n        let convertedDate = getDateTime(date)\r\n      \r\n   \r\n        \r\n  \r\n\r\n       \r\n        \r\n        let sent = convertedDate.toString()\r\n\r\n        const dayStr = sent.substr(0, 10)\r\n        const timeStr = sent.substr(15, 6)\r\n        return `${dayStr} at ${timeStr}`\r\n    }\r\n\r\n    \r\n    return (\r\n        <Row className=\"ce-chat-title\" style={styles.titleSection}>\r\n            <Col\r\n                xs={2}\r\n                sm={0}\r\n                style={{ ...styles.mobileOptiom, ...{ left: \"6px\" } }}\r\n                className=\"ce-chat-list-mobile-option\"\r\n            >\r\n                <ChatListDrawer chat={props.chat} creds={props.creds} conn={conn} />\r\n            </Col>\r\n\r\n            <Col\r\n                xs={8}\r\n                sm={12}\r\n                style={styles.titleContainer}\r\n                className=\"ce-chat-title-container\"\r\n            >\r\n        \r\n                {otherPerson && otherPerson.person.avatar ? (\r\n                    <img\r\n                        src={otherPerson.person.avatar}\r\n                        style={{ borderRadius: \"50%\", width: \"40px\" }}\r\n                    />\r\n                ) : (\r\n                    <img\r\n                        src={empty}\r\n                        className=\"chat-card-avatar\"\r\n                        style={{ borderRadius: \"50%\", width: \"40px\" }}\r\n                    />\r\n                )}\r\n                <div className=\"ce-chat-header-container\">\r\n                    <div\r\n                        style={styles.titleText}\r\n                        className=\"ce-chat-title-text\"\r\n                        id={`ce-chat-feed-title-${title}`}\r\n                    >\r\n                        {title}\r\n                    </div>\r\n\r\n                    <div style={styles.subtitleText} className=\"ce-chat-subtitle-text\">\r\n                   \r\n                    {userStatus ? userStatus : (\r\n                        chat.last_message.created && chat.last_message.created.length > 0 ?\r\n                        `Active ${timeSinceDate(chat.last_message.created)}` :\r\n                        'Say hello!'\r\n                    ) }\r\n                    </div>\r\n                </div>\r\n            </Col>\r\n        </Row>\r\n    );\r\n};\r\n\r\nexport default ChatHeader;\r\n\r\nconst styles = {\r\n    titleSection: {\r\n        position: \"absolute\",\r\n        top: \"0px\",\r\n        width: \"100%\",\r\n        zIndex: \"1\",\r\n        backgroundColor: \"rgb(256, 256, 256, 0.92)\",\r\n        fontFamily: \"Avenir\",\r\n    },\r\n    mobileOptiom: {\r\n        width: \"100%\",\r\n        top: \"32px\",\r\n        textAlign: \"center\",\r\n        color: \"rgb(24, 144, 255)\",\r\n        overflow: \"hidden\",\r\n    },\r\n    titleContainer: {\r\n        width: \"100%\",\r\n        padding: \"18px 0px\",\r\n        textAlign: \"left\",\r\n        color: \"rgb(24, 144, 255)\",\r\n    },\r\n    titleText: {\r\n        fontSize: \"24px\",\r\n        fontWeight: \"600\",\r\n    },\r\n    subtitleText: {\r\n        fontSize: \"12px\",\r\n    },\r\n};\r\n","import React, { useContext, useRef, useState, useEffect } from 'react'\n\nimport { ChatEngineContext } from 'react-chat-engine'\n\nconst IsTyping = () => {\n    const didMountRef = useRef(false)\n    const [currentTime, setCurrentTime] = useState(Date.now())\n    const { conn, activeChat, typingCounter } = useContext(ChatEngineContext)\n    const typers = typingCounter && typingCounter[activeChat] ? typingCounter[activeChat] : []\n\n    useEffect(() => {\n        if (!didMountRef.current) {\n            didMountRef.current = true\n            setInterval(() => {\n                setCurrentTime(Date.now())\n            }, 1000) // Check time every second\n        }\n    })\n\n    if (!conn || conn === null) return <div />\n\n    return (\n        <div>\n            {\n                Object.keys(typers).map((username, index) => {\n                    if (conn.userName !== username && currentTime < typers[username] + 2000) {\n                        return (\n                            <div \n                                key={`typer_${index}`} \n                                style={{\n                                     color: 'var(--paperclip-color)',\n                                      paddingLeft: '12px', \n                                      position: 'absolute'\n                                     \n                                     \n                                     \n                                     }}\n                            >\n                                {`${username} is typing...`}\n                            </div>\n                        )\n\n                    } else {\n                        return <div key={`typer_${index}`} />\n                    }\n                })\n            }\n        </div>\n    )\n}\n\nexport default IsTyping","import React from 'react'\r\n\r\nconst Thumbnail = props => {\r\n    const { attachment } = props \r\n\r\n    if (!attachment) { return <div /> }\r\n\r\n    return (\r\n        <div style={styles.container} className='ce-photo-thumbnail'>\r\n            \r\n            <div style={{ paddingTop: '100%' }} />\r\n            \r\n            <img\r\n                alt={attachment.id}\r\n                style={styles.image}\r\n                src={attachment.file}\r\n                className='ce-photo-img'\r\n                id={`image-${attachment.id}`}\r\n            />\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Thumbnail\r\n\r\nconst styles = {\r\n    container: { \r\n        position: 'relative', \r\n        width: 'calc(33% - 8px)', \r\n        border: '1px solid white', \r\n        display: 'inline-block',\r\n        cursor: 'pointer'\r\n    },\r\n    image: {\r\n        top: '0px', \r\n        width: '100%', \r\n        height: '100%',\r\n        position: 'absolute',\r\n        objectFit: 'cover'\r\n    }\r\n}","import React, { useState } from \"react\";\r\nimport Thumbnail from \"../Thumbnail\";\r\nimport { LeftOutlined, DownOutlined } from \"@ant-design/icons\";\r\n\r\nconst PhotosSettings = (props) => {\r\n    const [state, setState] = useState({\r\n        collapsed: true,\r\n        hovered: false,\r\n        errorMessage: \"\"\r\n    });\r\n    const { chat } = props;\r\n\r\n\r\n    function renderPhotos(attachments) {\r\n        return attachments.map((attachment, index) => {\r\n            return <Thumbnail key={`person_${index}`} attachment={attachment} />;\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div\r\n            style={{ borderTop: \"1px solid #f0f0f0\" }}\r\n            className=\"ce-photo-section\"\r\n        >\r\n            <div\r\n                onMouseEnter={() => setState({ ...state, hovered: true })}\r\n                onMouseLeave={() => setState({ ...state, hovered: false })}\r\n                onClick={() => setState({ ...state, collapsed: !state.collapsed })}\r\n                style={\r\n                    state.hovered ? {\r\n\r\n                        cursor: \"pointer\"\r\n                     \r\n\r\n                    } : {}\r\n                }\r\n                className=\"ce-section-title-container ce-photo-title-container\"\r\n            >\r\n                <div\r\n                    className=\"ce-section-title ce-photo-title\"\r\n                    style={{\r\n                        fontSize: \"16px\",\r\n                        padding: \"12px 12px 12px 0px\",\r\n                        fontWeight: \"400\",\r\n                        fontFamily: \"Quicksand\",\r\n                        letterSpacing: \"1px\",\r\n                        fontWeight: \"400\",\r\n                        color: \"rgba(255, 255, 255, 0.7)\"\r\n                    }}\r\n                >\r\n                    Gallery\r\n                </div>\r\n\r\n                {state.collapsed ? (\r\n                    <LeftOutlined style={styles.collapseIcon} />\r\n                ) : (\r\n                    <DownOutlined style={styles.collapseIcon} />\r\n                )}\r\n            </div>\r\n\r\n\r\n            {!state.collapsed && (\r\n                <div className=\"ce-photo-feed\">\r\n                    <div style={{ height: \"12px\" }} />\r\n\r\n                    {(chat.attachments.length > 0) ?\r\n                        renderPhotos(chat.attachments)\r\n                        :\r\n                        <div className=\"gallery-error\"> Nothing here yet</div>\r\n                    }\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PhotosSettings;\r\n\r\nconst styles = {\r\n    collapseIcon: {\r\n        float: \"right\",\r\n        position: \"relative\",\r\n        bottom: \"30px\",\r\n        right: \"12px\",\r\n    },\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ChatEngineContext } from \"react-chat-engine\";\r\nimport PhotosSettings from \"./PhotosSettings\";\r\nimport OptionsSettings from \"./OptionsSettings\";\r\nimport { ChatProfile } from \"./ChatProfile\";\r\n\r\nconst ChatSettingsBox = () => {\r\n  \r\n  return (\r\n    <div className=\"chat-settings-box\">\r\n    \r\n    \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatSettingsBox;\r\n\r\n\r\n","import React, { useState, useEffect } from 'react'\n\nimport { CloseCircleTwoTone } from '@ant-design/icons'\n\nconst Thumbnail = props => {\n    const [hovered, setHovered] = useState(false)\n    const [blob, setBlob] = useState('')\n    useEffect(() => {\n      setBlob(URL.createObjectURL(props.file))\n    }, [props.file])\n    return (\n        <div \n            style={{ padding: '12px 6px', display: 'inline-block', position: \"relative\" }}\n            onMouseEnter={() => setHovered(true)}\n            onMouseLeave={() => setHovered(false)}\n        >\n            \n            <img\n                style={styles.imageSquare}\n                alt={props.file ? props.file.name : ''}\n                src={blob}\n            />\n\n            {\n                hovered &&\n                <CloseCircleTwoTone \n                    style={styles.closeIcon} \n                    onClick={() => props.onRemove && props.onRemove()}\n                />\n            }\n        </div>\n    )\n}\n\nexport default Thumbnail\n\nconst styles = {\n    imageSquare: { \n        height: '108px', \n        width: '108px', \n        border: '1px solid #afafaf',\n        borderRadius: '8px',\n        objectFit: 'cover',\n        display: 'inline',\n    },\n    closeIcon: {\n        position: 'absolute', \n        bottom: 'calc(100% - 32px)', \n        left: '96px', \n        width: '0px', \n        cursor: 'pointer'\n    }\n}\n","import React from 'react'\n\nimport Thumbnail from './Thumbnail'\n\nconst FileRow = props => {\n    function renderFiles() {\n        return props.files.map((file, index) => {\n            return (\n                <Thumbnail \n                    file={file} \n                    key={`thumb_${index}`} \n                    onRemove={() => props.onRemove && props.onRemove(index)}\n                />\n            )\n        })\n    }\n  \n    return (\n        <div style={{ \n            width: '50px', \n            paddingLeft: '12px',\n            position: 'absolute' ,\n            bottom: '70px'\n            }}>\n            { renderFiles() }\n        </div>\n    )\n}\n\nexport default FileRow","import React, { useState } from 'react';\n\nimport { PaperClipOutlined } from '@ant-design/icons'\n\nconst ImagesInput = props => {\n    const [state, setState] = useState({\n        hovered: false,\n    })\n\n    function onSelect(event) {\n        const files = Array.from(event.target.files)\n        props.onSelectFiles &&  props.onSelectFiles(files)\n    }\n\n    return (\n        <form\n            className=\"uploader\"\n            encType=\"multipart/form-data\"\n            style={{ height: '0px' }}\n        >\n            <label\n                htmlFor=\"files\"\n                id='upload-document-button'\n            >\n                <PaperClipOutlined \n                    onMouseEnter={() => setState({ ...state, hovered: true })}\n                    onMouseLeave={() => setState({ ...state, hovered: false })}\n                    style={{\n                        ...{ cursor: 'pointer', position: 'absolute', bottom: '20px', right: '63px', fontSize: '18px' },\n                        ...{ color: state.hovered ? '#69c0ff' : '#1890ff' }\n                    }}\n                />\n            </label>\n\n            <input\n               \n                id=\"files\"\n                accept=\"image/x-png,image/gif,image/jpeg\"\n                style={{ visibility: \"hidden\" }}\n                type=\"file\"\n                onChange={(e) => onSelect(e)}\n                onClick={(e) => e.target.value = null}\n            />\n        </form>\n    );\n}\n\nexport default ImagesInput\n","import React, { Component } from 'react'\n\nexport default class MessageInput extends Component {\n    state = {\n        focused: false,\n        value: null,\n        height: 0\n    }\n\n    resize() {\n        var textarea = document.getElementById(\"msg-textarea\");\n        textarea.style.height = \"\";\n        textarea.style.height = Math.min(textarea.scrollHeight, 150) + \"px\";\n        this.setState({ height: Math.min(textarea.scrollHeight, 150) })\n    }\n\n    componentDidMount() { this.resize() }\n\n    handleChange(e) {\n        this.resize()\n        this.props.handleChange && this.props.handleChange(e)\n    }\n\n    onKeyDown(e) {\n        if (e.key === 'Enter') { \n            e.preventDefault()\n\n            if (this.props.value.length > 0) {\n                this.props.onSubmit && this.props.onSubmit(e) \n            }\n        }\n    }    \n\n    render() {\n        const style = { \n            ...styles.input, \n            ...{ overflowY: this.state.height === 150 ? 'scroll' : 'hidden' } \n        }\n\n        return (\n            <textarea \n                id='msg-textarea'\n                className='ce-input ce-textarea-input'\n                rows='1'\n                style={style}\n                value={this.props.value}\n                placeholder={this.props.label}\n                onBlur={() => this.setState({ focused: false })}\n                onFocus={() => this.setState({ focused: true })}\n                type={this.props.type ? this.props.type : \"text\" }\n                onChange={(e) => this.handleChange(e)} \n                onKeyDown={(e) => this.onKeyDown(e)}\n                maxlength='120'\n                required\n            />\n        )\n    }\n}\n\nconst styles = {\n    input: { \n        border: '1px solid white',\n        width: 'calc(100% - 64px - 24px - 44px)',\n        outline: 'none', \n        fontSize: '15px',\n        fontFamily: 'Avenir',\n        paddingLeft: '12px',\n        paddingRight: '12px',\n        position: 'relative', \n        left: '12px',\n        resize: 'none', \n        overflowX: 'hidden'\n    }\n}","import React, { useContext, useState } from 'react'\n\nimport { ChatEngineContext } from 'react-chat-engine'\n\nimport { sendMessage, isTyping } from 'react-chat-engine'\nimport { SendOutlined } from \"@ant-design/icons\";\nimport sendIcon from \"../../../../images/send.png\";\nimport FileRow from './FileRow'\nimport ImagesInput from './ImagesInput'\nimport MessageInput from './MessageInput'\n\nimport { Button } from 'react-chat-engine'\n\nconst NewMessageForm = () => {\n  const { conn, activeChat, sendingMessages, setSendingMessages } = useContext(ChatEngineContext)\n  const [state, setState] = useState({\n    trigger: 0,\n    mod: 3,\n    value: '',\n    attachments: []\n  })\n\n  if (!conn || conn === null) return <div />\n\n  function onRemove(index) {\n    let { attachments } = state \n    attachments.splice(index, 1)\n    setState({ ...state, attachments })\n  }\n  \n  function handleChange(event) {\n    setState({\n      ...state,\n      value: event.target.value,\n      trigger: (state.trigger + 1) % state.mod\n    });\n    \n    if (state.trigger === 1) {\n      isTyping(conn, activeChat)\n    }\n  }\n  \n  function handleSubmit(event) {\n    event.preventDefault();\n\n    const { attachments } = state\n    const text = state.value.trim()\n    const custom_json = { sender_id: Date.now().toString() }\n    const sender_username = conn.userName ? conn.userName : conn.senderUsername\n    const data = { text, attachments, custom_json, sender_username, chat: activeChat }\n\n    if (text.length > 0 || attachments.length > 0) {\n      sendMessage(conn, activeChat, data, (data) => {})\n    }\n\n    setState({ ...state, value: '', attachments: [] })\n    \n    // TODO: Should be in Text Area Input\n    var textarea = document.getElementById(\"msg-textarea\")\n    textarea.style.height = \"24px\"\n\n    let newSendingMessages = {...sendingMessages}\n    newSendingMessages[data.custom_json.sender_id] = data\n    setSendingMessages(newSendingMessages)\n  }\n\n  return (\n    <div \n      id='msg-form-container'\n      style={styles.NewMessageFormContainer}\n      className='ce-message-form-container'\n    >\n      <FileRow files={state.attachments} onRemove={(i) => onRemove(i)} />\n\n      \n\n      <form onSubmit={handleSubmit.bind(this)} className='ce-message-form'>\n        <div style={styles.inputContainer} className='ce-message-input-form'>\n        <ImagesInput onSelectFiles={(attachments) => setState({ ...state, attachments })} />\n          <MessageInput\n            value={state.value}\n            label='Send a message...'\n            handleChange={handleChange.bind(this)}\n            onSubmit={handleSubmit.bind(this)}\n          />\n\n         \n        </div>\n        <button \n            icon='send'\n            type=\"submit\"\n            id='ce-send-message-button'\n            style={{  }}\n          >\n           <img src={sendIcon} className=\"send-icon\" alt=\"\"/>\n          </button>\n      </form>\n    </div>\n  );\n}\n\nexport default NewMessageForm\n\nconst styles = {\n  NewMessageFormContainer: { \n    position: 'absolute', \n    bottom: '0px', \n    width: '100%', \n    backgroundColor: 'white',\n  },\n  inputContainer: { \n    minHeight: '36px',\n    paddingTop: '10px',\n    paddingBottom: '6px',\n  },\n}","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from \"react\";\r\nimport { ChatEngine, getOrCreateChat } from \"react-chat-engine\";\r\nimport { useAuth } from \"context/AuthContext.js\";\r\nimport ChatCard from \"./ChatList/ChatCard\";\r\nimport ChatHeader from \"./ChatFeed/ChatHeader\";\r\nimport IsTyping from \"./ChatFeed/IsTyping\";\r\nimport ChatSettingsBox from \"./ChatSettings/ChatSettingsBox\";\r\nimport PhotosSettings from \"./ChatSettings/PhotosSettings\";\r\nimport axios from \"axios\";\r\nimport NewChatForm from './ChatList/NewChatForm'\r\nimport NewMessageForm from './ChatFeed/NewMessageForm/NewMessageForm'\r\nimport ChatList from './ChatList/ChatList'\r\n\r\nexport const Chat = () => {\r\n  const { userObject, convertedName } = useAuth();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [newChatError, setNewChatError] = useState(\"\");\r\n  const [newAccountStatus, setNewAccountStatus] = useState(false);\r\n\r\n  function lowerLetters(str) {\r\n    return str.toLowerCase();\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    // This hook creates new Chat Engine account if there is none\r\n\r\n    const data = {\r\n      username: convertedName,\r\n      secret: userObject.uid,\r\n    };\r\n    const config = {\r\n      method: \"post\",\r\n      url: \"https://api.chatengine.io/users/\",\r\n      headers: {\r\n        \"PRIVATE-KEY\": process.env.REACT_APP_CHAT_ENGINE_PRIVATE_KEY,\r\n      },\r\n      data: data,\r\n    };\r\n\r\n    axios(config)\r\n      .then(() => {\r\n        // This function adds sample conversation for a new account\r\n        addDefaultChat(encodeURIComponent(\"test account\"));\r\n        setNewAccountStatus(true);\r\n      })\r\n      .catch(() => {\r\n        console.log(\"This account is already created\");\r\n        setNewAccountStatus(true);\r\n      });\r\n\r\n    \r\n  }, []);\r\n\r\n  function addDefaultChat(otherName) {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\"Project-ID\", process.env.REACT_APP_PROJECT_ID);\r\n    myHeaders.append(\"User-Name\", convertedName);\r\n    myHeaders.append(\"User-Secret\", userObject.uid);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n    var raw = JSON.stringify({\r\n      is_direct_chat: true,\r\n      usernames: [convertedName, otherName],\r\n    });\r\n\r\n    var requestOptions = {\r\n      method: \"PUT\",\r\n      headers: myHeaders,\r\n      body: raw,\r\n      redirect: \"follow\",\r\n      contentType: \"application/json; charset=utf-8\",\r\n    };\r\n\r\n    fetch(\"https://api.chatengine.io/chats/\", requestOptions)\r\n      .then((response) => response.text())\r\n      .catch((error) => console.log(\"error\", error));\r\n  }\r\n\r\n  function createDirectChat(creds, otherPerson) {\r\n    const newName = otherPerson\r\n      ? otherPerson\r\n      : encodeURIComponent(lowerLetters(username));\r\n\r\n    if (newName == convertedName) {\r\n      setNewChatError(\"This is your own nickname!\");\r\n      setTimeout(() => setNewChatError(\"\"), 5000);\r\n    } else {\r\n      var myHeaders = new Headers();\r\n      myHeaders.append(\"PRIVATE-KEY\", process.env.REACT_APP_CHAT_ENGINE_PRIVATE_KEY);\r\n\r\n      var requestOptions = {\r\n        method: \"GET\",\r\n        headers: myHeaders,\r\n        redirect: \"follow\",\r\n      };\r\n\r\n      fetch(\"https://api.chatengine.io/users/\", requestOptions)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          if (data.some((x) => x.username == newName)) {\r\n            getOrCreateChat(\r\n              creds,\r\n              { is_direct_chat: true, usernames: [newName] },\r\n              () => {\r\n                setUsername(\"\");\r\n                setNewChatError(\"\");\r\n              }\r\n            );\r\n          } else {\r\n            setNewChatError(\"There is no such user\");\r\n            setTimeout(() => setNewChatError(\"\"), 5000);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  function renderChatForm(creds) {\r\n    return (\r\n      <div>\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            createDirectChat(creds);\r\n          }}\r\n        >\r\n          <input\r\n            placeholder=\"Username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <button type=\"submit\" value=\"Send\">\r\n            Create\r\n          </button>\r\n        </form>\r\n        <div className=\"newChatError\">{newChatError}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      {convertedName && userObject && newAccountStatus ? (\r\n        <ChatEngine\r\n          offset={2}\r\n          projectID={process.env.REACT_APP_PROJECT_ID}\r\n          userName={convertedName}\r\n          userSecret={userObject.uid}\r\n          height=\"630px\"\r\n          renderChatList={(chatAppState) => { return <ChatList chatAppState={chatAppState}  />}}\r\n          renderChatCard={(chat, index) => { return <ChatCard chat={chat} index={index} /> }}\r\n          renderNewChatForm={(creds) => { return <NewChatForm creds={creds} /> }}\r\n         \r\n          renderChatHeader={(creds) => { return <ChatHeader creds={creds} /> }}\r\n        \r\n          renderIsTyping={(typers) => {return <IsTyping typers={typers} />}}\r\n          renderPhotosSettings={(chat) => { return (<PhotosSettings chat={chat} name={convertedName} secret={userObject.uid} />); }}\r\n renderChatSettings={() => { return <ChatSettingsBox  />\r\n     \r\n\r\n          }}\r\n          renderNewMessageForm={(creds, chatId) => {return <NewMessageForm  creds={creds} chatId={chatId} />}}\r\n        />\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      \r\n    </div>\r\n  );\r\n};\r\n","import * as Yup from 'yup';\r\n\r\nexport const defaultValues = {\r\n    userName: '',\r\n    password: ''   \r\n};\r\n\r\nexport const validationSchema = Yup.object().shape({\r\n    userName: Yup.string().required('Required').min(3, 'Must be at leat 3 characters'),\r\n    password: Yup.string().required('Required')\r\n   \r\n})","import { fb, facebookProvider, googleProvider } from \"service\";\r\nimport { useState } from \"react\";\r\nimport { FormField } from \"components\";\r\nimport { ErrorMessage, Formik, Form } from \"formik\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { defaultValues, validationSchema } from \"./formikConfig\";\r\nimport { GoogleOutlined, FacebookOutlined, UserOutlined, LockOutlined, CommentOutlined } from \"@ant-design/icons\";\r\nimport loadingAnimation from \"../../images/loading.svg\";\r\n\r\nexport const Login = () => {\r\n  const [serverError, setServerError] = useState(\"\");\r\n  const history = useHistory();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  function lowerLetters(str) {\r\n    return str.toLowerCase();\r\n  }\r\n  const login = ({ userName, password }, { setSubmitting }) => {\r\n    setLoading(true)\r\n    // @chat.engine is added to login because of Firebase requiring email string\r\n    fb.auth\r\n      .signInWithEmailAndPassword(\r\n        `${encodeURIComponent(lowerLetters(userName))}@chat.engine`,\r\n        password\r\n      )\r\n      .then((res) => {\r\n        \r\n        if (!res.user) {\r\n          setServerError(\r\n            \"We're having trouble logging you in. Please try again.\"\r\n          );\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.code === \"auth/wrong-password\") {\r\n          setServerError(\"Username or password is invalid\");\r\n        } else if (err.code === \"auth/user-not-found\") {\r\n          setServerError(\"No account for this username\");\r\n        } else {\r\n          setServerError(\"Something went wrong :(\");\r\n        }\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false)\r\n        setLoading(false)\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-form\">\r\n      <div className=\"logo\">\r\n        <CommentOutlined />\r\n        <div className=\"logo-text\">\r\n          <div className=\"logo-text-first\">  Chat</div>\r\n          <div className=\"logo-text-second\">     App</div>\r\n        </div>\r\n      </div>\r\n\r\n      <Formik\r\n        onSubmit={login}\r\n        validateOnMount={true}\r\n        initialValues={defaultValues}\r\n        validationSchema={validationSchema}\r\n      >\r\n        {({ isValid, isSubmitting }) => (\r\n          <Form>\r\n            <div class=\"login-fields\">\r\n              <div class=\"login-field\">\r\n                <UserOutlined />\r\n                <FormField name=\"userName\" placeholder=\"Username\"  /></div>\r\n                <ErrorMessage component='div' name=\"userName\" className=\"error\" /> <br />\r\n              <div class=\"login-field\">\r\n                <LockOutlined />\r\n                <FormField name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n              </div>\r\n              <ErrorMessage component='div' name=\"password\" className=\"error\" />\r\n            </div>\r\n            <div className=\"auth-link-container\">\r\n              Don't have an account?{\" \"}\r\n              <span\r\n                className=\"auth-link\"\r\n                onClick={() => history.push(\"signup\")}\r\n                className=\"signup-text\"\r\n              >\r\n                Sign Up!\r\n              </span>\r\n            </div>\r\n            {!loading ? \r\n            <button type=\"submit\">\r\n              Login\r\n            </button> : <div className=\"loading-image\"><img src={loadingAnimation} alt=\"\"  /></div>}\r\n\r\n            {!!serverError && <div className=\"error server-error\">{serverError}</div>}\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      <div className=\"social-media\">\r\n        <div className=\"social-media-header\">\r\n          <hr /> Login with social media<hr />\r\n        </div>\r\n        <div className=\"social-login\">\r\n          <div\r\n            className=\"google\"\r\n            onClick={() => fb.auth.signInWithRedirect(googleProvider)}\r\n          >\r\n            <GoogleOutlined /> Google\r\n          </div>\r\n          <div\r\n            className=\"google\"\r\n            onClick={() => fb.auth.signInWithRedirect(facebookProvider)}\r\n          >\r\n            <FacebookOutlined /> Facebook\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import * as Yup from 'yup';\r\n\r\nexport const defaultValues = {\r\n    password: '',\r\n    userName: '',\r\n    verifyPassword: '',\r\n};\r\n\r\nexport const validationSchema = Yup.object().shape({\r\n\r\n    password: Yup.string().required('Required').min(8, 'Must be at least 8 characters'),\r\n    verifyPassword: Yup.string().required('Required').oneOf([Yup.ref('password'), null], 'Password must match'),\r\n    userName: Yup.string()\r\n        .required('Required')\r\n        .matches(\"^[A-Za-z0-9 ]*[A-Za-z0-9][A-Za-z0-9 ]*$\", 'Please use letters or numbers')\r\n        .min(3, 'Must be at leat 3 characters')\r\n        .max(20, 'You have reached limit of characters')\r\n\r\n})","import { fb } from \"service\";\r\nimport { useState } from \"react\";\r\nimport { FormField } from \"components\";\r\nimport { ErrorMessage, Formik, Form } from \"formik\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { validationSchema, defaultValues } from \"./formikConfig\";\r\nimport { GoogleOutlined, FacebookOutlined, UserOutlined, LockOutlined, CommentOutlined } from \"@ant-design/icons\";\r\nimport loadingAnimation from \"../../images/loading.svg\";\r\n\r\nexport const Signup = () => {\r\n    const history = useHistory();\r\n    const [serverError, setServerError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    function lowerLetters(str) {\r\n        return str.toLowerCase();\r\n    }\r\n\r\n    const signup = ({ userName, password }, { setSubmitting }) => {\r\n        setLoading(true)\r\n        // @chat.engine is added to login because of Firebase requiring email string\r\n        fb.auth\r\n            .createUserWithEmailAndPassword(\r\n                `${encodeURIComponent(lowerLetters(userName))}@chat.engine`,\r\n                password\r\n            )\r\n\r\n            .then((res) => {\r\n                console.log(\"Firebase account created\");\r\n            })\r\n\r\n            .catch((err) => {\r\n                if (err.code === \"auth/email-already-in-use\") {\r\n                    setServerError(\"An account with this username already exists\");\r\n                } else {\r\n                    setServerError(\r\n                        \"We're having trouble signing you up. Please try again.\"\r\n                    );\r\n                }\r\n            })\r\n            .finally(() => {\r\n                setSubmitting(false)\r\n                setLoading(false)\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"auth-form signup-fields\">\r\n            <div className=\"logo\">\r\n                <CommentOutlined />\r\n                <div className=\"logo-text\">\r\n                    <div className=\"logo-text-first\">  Chat</div>\r\n                    <div className=\"logo-text-second\">     App</div>\r\n                </div>\r\n            </div>\r\n            <Formik\r\n                onSubmit={signup}\r\n                validateOnMount={true}\r\n                initialValues={defaultValues}\r\n                validationSchema={validationSchema}\r\n            >\r\n                {({ isValid, isSubmitting }) => (\r\n                    <Form>\r\n                        <div class=\"login-fields \">\r\n\r\n                            <div class=\"login-field\">\r\n                                <UserOutlined />\r\n                                <FormField name=\"userName\" placeholder=\"Username\" />\r\n                            </div>\r\n                            <ErrorMessage component='div' name=\"userName\" className=\"error\" />\r\n                            <div class=\"login-field\">\r\n                                <LockOutlined />\r\n                                <FormField name=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                            </div>\r\n                            <ErrorMessage component='div' name=\"password\" className=\"error\" />\r\n                            <div class=\"login-field\">\r\n                                <LockOutlined />\r\n                                <FormField name=\"verifyPassword\" placeholder=\"Verify Password\" type=\"password\" />\r\n                            </div>\r\n                            <ErrorMessage component='div' name=\"verifyPassword\" className=\"error\" />\r\n                        </div>\r\n\r\n                        {!loading ?\r\n                            <button type=\"submit\">\r\n                                Sign Up\r\n                            </button> : <div className=\"loading-image\"><img src={loadingAnimation} alt=\"\" /></div>}\r\n\r\n\r\n                        <div className=\"auth-link-container already-account\">\r\n                            Already have an account?{\" \"}\r\n                            <span className=\"auth-link signup-text\" onClick={() => history.push(\"login\")}>\r\n                                Log In!\r\n                            </span>\r\n                        </div>\r\n\r\n\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n            {!!serverError && <div className=\"error\">{serverError}</div>}\r\n        </div>\r\n    );\r\n};\r\n","import { ErrorMessage, Field } from 'formik';\r\n\r\nexport const FormField = ({ name, label, type = 'text', placeholder }) => (\r\n    \r\n    <label>\r\n   \r\n       \r\n  \r\n        <Field name={name} type={type}  placeholder={placeholder} />\r\n        \r\n    </label>\r\n)\r\n\r\n\r\n","import './index.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from 'components';\nrequire('dotenv').config()\n\n\nReactDOM.render(\n  <React.StrictMode>\n        <App />\n      </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}