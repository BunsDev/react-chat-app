(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{263:function(e,t,n){},456:function(e,t,n){"use strict";n.r(t);var c=n(2),a=(n(263),n(0)),s=n.n(a),r=n(47),i=n.n(r),o=n(23),g=n(5),l=n(78);n(267),n(457),n(458);try{l.a.initializeApp({apiKey:"AIzaSyC49RAhaWYBuj6KaVrZ8YffMOg1vDwT-PE",authDomain:"chat-app-2fd57.firebaseapp.com",projectId:"23640f53-64ad-4599-9275-2ad1ac133fff",storageBucket:"chat-app-2fd57.appspot.com",messagingSenderId:"248840660920",appId:"1:248840660920:web:a3c57bfef9740e0745914d"})}catch(Pe){/already exists/.test(Pe.message)||console.error("firebase admin init error",Pe.stack)}var A={auth:l.a.auth(),storage:l.a.storage(),firestore:l.a.firestore()},u=new l.a.auth.GoogleAuthProvider,d=new l.a.auth.FacebookAuthProvider,C=s.a.createContext(),I=function(){return Object(a.useContext)(C)},j=function(e){var t=e.children,n=Object(a.useState)(!0),s=Object(g.a)(n,2),r=s[0],i=s[1],l=Object(a.useState)({}),u=Object(g.a)(l,2),d=u[0],I=u[1],j=Object(a.useState)(),b=Object(g.a)(j,2),h=b[0],p=b[1],m=Object(o.f)();function f(e){return e.toLowerCase()}Object(a.useEffect)((function(){A.auth.onAuthStateChanged((function(e){e&&null==e.displayName?(I(e),p(f(e.email.substring(0,e.email.lastIndexOf("@")))),i(!1),m.push("/react-chat-app")):e&&null!==e.displayName?(I(e),p(encodeURIComponent(f(e.displayName))),i(!1),m.push("/react-chat-app")):(I(null),m.push("/login"),i(!1))}))}),[]);var O={userObject:d,convertedName:h};return Object(c.jsx)(C.Provider,{value:O,children:!r&&t})},b=n(82),h=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(j,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{exact:!0,path:"/react-chat-app",component:Se}),Object(c.jsx)(o.a,{path:"/login",component:Xe}),Object(c.jsx)(o.a,{path:"/signup",component:Te})]})})})})},p=n(10),m=n(7),f=n(55),O=n.n(f),x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAADTCAYAAAAS7IajAAAHmnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZhdduQmEIXfWUWWABRFwXL4PSc7yPLzoe722G0748k4b2m5JbWEENS9detit/76c7s/+ESLySW1kmvOnk+qqcbGSfG3T7v2wadrf32m3e+Ft9fdlPuNyKVzfv9d8r3943p46eB2aJzpq47KuN/ob2/UdO+/PHUUbwc5Izrn895RvXck8XYj3Dtot2n5XIu9nkJf9yne+73CwNedXSpvh/3utxG9qbxHYlwSxLOPkm4DkPMNThondu0rDb0o50GEfZLHVAnIR3Hyr0blnlF5OXtCZfePQZF8a+G48DaY+eX44fWgT9fvHborxK/eLON+Ft9ez8HX5+k8vnvP4vZet9m1lAlpvk/qMcXrjIZMLMn1WGYzvsq5XVtlKw72DiCffvjONkINEVh2SGGGFnZY13GEwRBTXKSDjzEOgDrXiliscYh3IJTOFnY0qTKlAOYAXuFqfBlLuN5br9eNUHjxDLSMgc4CT0R3dt+xfdrR3ofyIVzB7FesGFc8ScEwDnJnTysACfvBI70C/NiePwdXAUG9wlyYYPP91kXXcOfW4ZFcQAsNleMt14LNeweEiHcrgwkCAvBANEAGi9FCII4FfBodFZImdiAIqnEyyphEMuCUeN7NMxautlHj7TKaddJHMqlVAKiB1RE2+GOpwKGmoklVs5oWrdqy5JQ152z5iF8zsWRq2cyKVWtFSipacrFSXKml1VgFcdSaq9VSa22NlzZ6bjzdaNBaj1166tpzt1567W1An5GGjjxsFDfqaDNOmejEzNNmmXW2FRZUWmnpystWWXW1DdW27LR152277LrbC2rB3WB9t30dtfBALV5InYb2ghqPmj26CEdO9GAGYjEFELeDAISOBzNfQkrRHegOZr5GskIjo9QDzgwHMRBMK0Td4QW7H8i9wc2l9Fu4xQdy7kD3Hci5A90nyL3H7QPU5qk2w4u7EDppeILqhfTbiUgU/qhJXz+6X33g/46+syP4GMcImkiHffNIqXXLu5mOif6OVovK9N1CbfAFRvRUnKZUyZhcgd3DjtzTKnAhn6Y1rJzmIO9gp+01pOe99qgbCk85Lxfxq1iebs9dZUvYi2KcagthpUEmTPK4zXa1rQqPA988qiXIbTv4RS7ltsbY+JHcXcx7H9NHdpFME2e3Z2ploXunK6YaPfnjC1o8oWpqx3ydGLw9uvLJjS8de7akPQ2yyOmwHmcWRkSaBauB/bAT+UZxD6snytkMSY+X04+PKIxrYzYEQXyd3kbb01bXSq9pES9f88iJ5E5HjLa2pe0/4BEWI65dK0UwuRJ0FjX0+2BSQ5++yLl0fOkZ+edHYaTKrHZqS9zYPk3L8WBnoa9K0MJqYBZ+KfbuCw0pzl3gYEg97MwMbEBLNLhtyrT5sfzMLq+C30I9kdhjb8PINlvXL4Qoht7j6BmV1uAgYR++rTTRa7+YsofVTFa1ILcj9p4Rc5t4tVwZ39AP+3X/HjNpOmG8NBgi0/nKdJktxSyXbqlRG4iKz2mR/7kz9S90PZqbJnvJbLK3EZrc6545rpkpSsDcmaK0yj0mNb5d2FitSKU8t9mxvMyoZse6byWLg/KHIWc0PcS2oJNYFVu1StG8a7o0gtsnNvkfR0Tsjr9fPZjFNgcyFUZJkRzuxW/qZI+xDUUPl+k6adml7DMCllzB/SQNvnz80RHSd5OEKbl2Am96BWPjKyzKPvIM3dYMs8bVJDYC1TEyCBDLTfdeYnAe9NLiXFiiGPZc4FpiTyCK2NS6MjFF6etC5tHN60H3qVj94vF9R8hht41JGZSNTfJ08Gxov++FZX2q5JhScPBXI+eO7bnS2z2JMGbFDgeoAORb0NHnxOXgF8dYp+4wowFhiJ+m1yxwv1toOxYV4otj5baAxsukeJ2ZUZVGKRSrPBM1Fynwg7Kg/VSoXkRGZdxHBpUInHqKpYSQwUheerB+8fG0nzI6pRff2navy4I2eqJi99kzxSUjorhToH3FJPcpxZSATbJ3LX80i2hPUjriAxMDw7pKgGMBv2gKv11vtxJeJu5VscNY67IGs4JoXbQNEexkotIiAYOxsmrFEvh6yvwAYC74HN28bDV+FTGS3XGm67yEtLpS6CsZ0hAvYgSDKPx42TTqWuYBu9RDZ20bbdUkeeE5Sjhp0v3yqhumNCVs+YQN8Z9zuRP/Se3GWOz0Ly3AczlKrE1COf+ysB5aE1NcV5/U6wYd5p5qzZYqrpvWGHB8AfZ7WqTGO4u2rSg0xeoUlp2eBUXAEfQxYw5VU4fWKS9yVNr5b8s664BPbE0j2koN6mdhSs0rG+06wZiRVWtunlpeh4+XPqbvLkc/jomRO41yUmGe7DgpX5di5s58tRRggdUpC6sQZVg2WYxUpE7zhyMiAXxNeFRkPkFBzOrClOQ4WYjNcSVP+4nXcr+ra2HszIJ0OQTHz7r7an6zhKIOVRZkZMWZJyt91KkOzfIRrSnZi6VkMBy126jUSnWPhQ4ihxEOaA/MmJyckyI7j/Gwn0Xc/SZkAm2RJ1NXC9JMYhnKxkjb3Dt6FoiQjrR59cRmtUgtdn8D5dsyWqu2OioAAAGEaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBzFX1O1WioOdhBxyFCdLIiKOEoVi2ChtBVadTC59AuaNCQpLo6Ca8HBj8Wqg4uzrg6ugiD4AeLm5qToIiX+Lym0iPHguB/v7j3u3gFCo8JUs2sCUDXLSMVjYja3KgZeEUAf/OhBUGKmnkgvZuA5vu7h4+tdlGd5n/tz9Ct5kwE+kXiO6YZFvEE8s2npnPeJw6wkKcTnxOMGXZD4keuyy2+ciw4LPDNsZFLzxGFisdjBcgezkqESTxNHFFWjfCHrssJ5i7NaqbHWPfkLQ3ltJc11miOIYwkJJCFCRg1lVGAhSqtGiokU7cc8/MOOP0kumVxlMHIsoAoVkuMH/4Pf3ZqFqUk3KRQDul9s+2MUCOwCzbptfx/bdvME8D8DV1rbX20As5+k19ta5AgY2AYurtuavAdc7gBDT7pkSI7kpykUCsD7GX1TDhi8BYJrbm+tfZw+ABnqavkGODgExoqUve7x7t7O3v490+rvB+RFcm7EfYW6AAANGGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDpiMzg1YmEyYi0yN2Y3LTRmNDMtOTBlMi1jYWExYWMxNjdjYmIiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MmM3ZTFlMDYtODcyYS00OTNiLWEyM2QtZTU2NzFmMzY2OGI1IgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NGJkYWRlY2EtYTE5Ni00ZGI4LWFmZTgtZjVlMWNlMzg1NTI5IgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE2MjU4MDA0MjU5ODU0OTgiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4yNCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMjlmYWQwMi05YWIyLTQxNzctOGE2NS0xYzFiODgyNTdkODUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDctMDlUMDU6MTM6NDUiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+7sjJCgAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UHCQMNLbdCL2oAAAYLSURBVHja7d0xa+NIGIDhuVNkBKpUGQxutjIY/P/b/IWAQVUagyGVKoPxYvaKw7nkdu/iZD1jjeZ5qlyzl9h+Nd9MIvuPx8fHHwG4uT89BCAuEBcgLhAXiAsQF4gLxAWIC8QF4gLEBeICcQHiAnGBuABxgbhAXIC4QFwgLkBcIC4QFyAuEBeICxAXiAvEBYgLxAXiAsQF4gJxAeICccEUPXgIxqeu69evq6p69/X5fH7978vX379/96CJi1+FVFVVqKoqzOfz0HXdl/+tYRjCy8tLOJ/P4Xw+i05cZca0WCx+K6Rf6brup3+z7/twPp/D8Xj04ItrmpqmiRLUR1ar1bvQTqeTFU1c09C27bsX+D1dvo9hGMJ+v7eaiUtUt3YZH4dhCLvdzkomrnz2VMvlMvn49zuR9X0fDoeDJ09c495Xrdfr7L7v1WplFYvAL5FvOAbmGNbbVWyz2bz7HRvisr+6IYGJS1gCE9fU91hTC0tg4rq7uq6z3mNdY7lceqLF5YUXQ9d1oWkaT7a40o6DOfwe6xbW67XxUFxpX3Almc1mnnRxxde2bXE/82q1snqJK80LrURWL3FF32u5qCCuCBaLhYsL4rq1uq6LOSF0cRFXUm/fKKZUpV9cxCWu6Cs44rKhd5ERl6u1fZe4AHEZheJwqCEucRmTxQXiKth8PvcgIC6MyeICcQHiAnGBuAghvLy8eBDeePvRsYgLxAXiMgYVy8cMiUtcEQzD4EEQF4jLGJQRJ6fiMg4ZkcXlii2uqfKB4x+43BjoRfXzY2JcFteXffv2zW3t/7LZbF6/3m634Xg8elCMhZ/Ttq2wPuCzu8T1pbHH+xRex6efiOtT3Gl7PRchcYkr8kqPuK7iDWlcjMQF4sqLU0Irl7hAXCAuQFwgruy4veRz/FGzuBCXuO5tv997EBCXK/H9R2j3dYnral4sVnlxRbTdbj0IV3CzpLi+9KJxaugCJK5IdrudB+E/9H1v1RLX7+29np6erGC/COtwOHggPuANaq4I7Pn5ObRtG+bzedF/MT8MQ9jtdg58xHVbh8MhPD8/h7quQ1VVYb1eF/OzPz09CcpYmGYl8zMjrkj8khlxcZN9FuIiAu+RLy57EMRlXLK/FBf/q5Q/WBWXuLzoIq3ORmBx2XdF4DBDXHfT9/2kf77T6eRJFpcXn5FQXJMbDae6erndRlxWL6uWuKxeVi1x8WmHw2Eyv1Tu+96qJS5X+xjjoDuMxTXK8TDnN2y53GWMuEbpeDxmG5jb98UlsAgrltv4xZVVYLmcIFqxxAXiAsQF4gJxAeICcYG4AHGBuEBcgLhAXCAuQFwgrpw1TRPm83kW3+tsNgt1XXvSIvCB4zeOarFYhK7rsvmeV6tVCOGf99Bw46S4RqOu6zCbzV5fpLnqui50XReGYQj7/T4cj0dPrrjuF9VyucxqlfpMZCH8/R6Gp9PJaiYuo1+skVFk4jL6JdiXGRnFJaoEI6N35xWX0c/IKC6rlJFRXFYpPhgZrWaFxmWVspqJK0JUU/zdlNVMXFYpq1lRq9lk47KXspqJS1DFr2ZTDS37uIx9xkZxWaUobGzMLq62ba1SVjNxiYpbrma5RfYgKnKMLIe7ph9EhcgKiatpmrBer72CyD6yB1EhsonG5e/9uHVkY7mR80FUTM1lr77dbu96sniXuBxWkMJlm3GvyB5ERQmR3WM/luztrJumERZ33Y9tNpuk/0/vFU9RUr4vfrK4qqryzFKUZHHl8qkfTFvKi3yyuBy5I67M51wobiyEMUi5PUkSl8MMxiLl9kRcFCfVNsVYCDnH5RieMUk1SSWJyzE84sp4voWxTVL2XJBrXE4KGZtU2xRxUaQU25XocTkpZIxSXPTtuSDXuBzDY+XKdK6FsW5XjIUUKcVEFTUuJ4XYc4mLAsXetkSNyzE8Yxb74h81LieFGAvBypVPXI7hGbvY25ZocTnMYOxib1uMhRQt5oRl5YLc4nIMTw5iLgLR4nIMj7gym2Oh+LEQchBz+xIlLocZ5CLm9kVcFC/WNsZYCDmtXI7hyUmsSStKXI7hEVcIfwE3vW4pmErq7wAAAABJRU5ErkJggg==",v={chatContainer:{padding:"16px",paddingBottom:"12px",cursor:"pointer"},titleText:{fontWeight:"500",paddingBottom:"4px",whiteSpace:"nowrap",overflow:"hidden"},status:{width:"8px",height:"8px",borderRadius:"100%",border:"2px solid #d3d8e4de",position:"absolute",top:"35px"},messageText:{width:"100%",color:"var(--gray-text)",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",display:"inline-block"},activeChat:{backgroundColor:"#d9d9d9",border:"4px solid white",borderRadius:"12px"}},N=function(e){var t=Object(a.useContext)(p.e),n=t.conn,s=t.activeChat,r=t.setActiveChat,i=e.chat;if(!n||null===n)return Object(c.jsx)("div",{});if(!i)return Object(c.jsx)("div",{});var o=s===i.id?v.activeChat:{},g=i.people.find((function(e){return e.person.username!==n.userName})),l=g?g.person.username:"",A=g?function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?e.toLowerCase():e).replace(/(?:^|\s|["'([{])+\S/g,(function(e){return e.toUpperCase()}))}(decodeURIComponent(l)):"",u=i.last_message.text;u||(u=i.last_message.attachments.length>0?"".concat(i.last_message.attachments.length," image").concat(i.last_message.attachments.length>1?"s":""):"Say hello!");return Object(c.jsxs)("div",{onClick:function(){return r(i.id)},style:Object(m.a)(Object(m.a)({},v.chatContainer),o),className:"ce-chat-card ".concat(s===i.id&&"ce-active-chat-card"),children:[g&&g.person.avatar?Object(c.jsxs)("div",{className:"avatar-online",children:[Object(c.jsx)("div",{className:"ce-avatar-status",style:Object(m.a)(Object(m.a)({},v.status),{backgroundColor:g.person.is_online?"#52c41a":"#f5222d"})}),Object(c.jsx)("img",{src:g.person.avatar,style:{borderRadius:"50%",width:"40px"}})]}):Object(c.jsxs)("div",{className:"avatar-online",children:[Object(c.jsx)("div",{className:"ce-avatar-status",style:Object(m.a)(Object(m.a)({},v.status),{backgroundColor:g&&g.person.is_online?"#52c41a":"#f5222d"})}),Object(c.jsx)("img",{src:x,className:"chat-card-avatar",style:{borderRadius:"50%",width:"40px"}})]}),Object(c.jsxs)("div",{className:"chat-card-info",children:[Object(c.jsx)("div",{style:v.titleText,className:"ce-chat-title-text",id:"ce-chat-card-title-".concat(A),children:A}),Object(c.jsx)("div",{style:{width:"100%"},className:"ce-chat-subtitle",children:Object(c.jsx)("div",{style:v.messageText,className:"ce-chat-subtitle-text ce-chat-subtitle-message",children:u})})]}),Object(c.jsxs)("div",{className:"chat-card-activity",children:[Object(c.jsx)("div",{className:"chat-card-activity-time",children:i.last_message.created&&i.last_message.created.length>0?"".concat(function(e){if(!e)return"";var t=function(e){if(!e)return"";var t=(e=e.replace(" ","T")).substr(0,4),n=e.substr(5,2),c=e.substr(8,2),a=e.substr(11,2),s=e.substr(14,2),r=e.substr(17,2),i=new Date("".concat(t,"-").concat(n,"-").concat(c,"T").concat(a,":").concat(s,":").concat(r)),o=-i.getTimezoneOffset()/60;return i.setHours(i.getHours()+o),i}(e),n=t.toString(),c=n.substr(3,7),a=n.substr(15,6);return function(e){var t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}(t)?a:c}(i.last_message.created)):""}),!function(e){var t=!0;return e.people.map((function(c){n.userName===c.person.username&&(t=e.last_message.id===c.last_read)})),t}(i)&&Object(c.jsx)("div",{className:"ce-chat-unread-dot",style:{width:"12px",height:"12px",borderRadius:"6px",backgroundColor:"var(--own-msg-color)",display:"inline-block",marginTop:"15px",marginLeft:"10px"}})]})]})},y=n(473),w=n(472),S=n(249),R=n(192),U=n(470),k=n(83),E=n.n(k),F=n(471),L=function(e){var t=e.file,n=e.close,s=e.onSubmit,r=e.crop,i=void 0!==r&&r,o=e.username,l=e.userstatus,A=(Object(a.useContext)(p.e).conn,Object(a.useState)("")),u=Object(g.a)(A,2),d=u[0],C=u[1],I=Object(a.useRef)(),j=Object(a.useState)(o),b=Object(g.a)(j,2),h=b[0],m=(b[1],Object(a.useState)(l)),f=Object(g.a)(m,2),O=f[0];f[1];return console.log(o,l),Object(a.useEffect)((function(){var e=new FileReader;e.onload=function(){return C(e.result)},e.readAsDataURL(t)}),[t]),Object(c.jsxs)("div",{className:"chat-new-avatar",children:[i?Object(c.jsx)(E.a,{ref:I,width:100,height:100,border:40,borderRadius:50,image:d}):Object(c.jsx)(F.a,{size:"medium",src:d,alt:"preview"}),Object(c.jsxs)("div",{className:"image-upload-actions",children:[Object(c.jsx)("button",{className:"cancel",onClick:n,children:"Cancel"}),Object(c.jsx)("button",{className:"submit",onClick:function(){if(i&&I){var e=I.current.getImageScaledToCanvas().toDataURL();fetch(e).then((function(e){return e.blob()})).then((function(e){return s(e,h,O)}))}else s()},children:"Upload"})]})]})},D=function(e){var t=e.username,n=e.userstatus,s=e.close,r=e.onSubmit,i=Object(a.useState)(t),o=Object(g.a)(i,2),l=o[0],A=(o[1],Object(a.useState)(n)),u=Object(g.a)(A,2),d=u[0],C=u[1];return Object(c.jsxs)("div",{className:"edit-profile",children:[Object(c.jsx)("div",{className:"edit-name-input",children:Object(c.jsx)("input",{placeholder:"New status",value:d,onChange:function(e){return C(e.target.value)}})}),Object(c.jsxs)("div",{className:"image-upload-actions",children:[Object(c.jsx)("button",{className:"submit",onClick:function(){r(l,d)},children:"Upload"}),Object(c.jsx)("button",{className:"cancel",onClick:s,children:"Cancel"})]})]})},M=n(479),X=n(478),G=n(480),W=function(e){var t=I(),n=t.userObject,s=t.convertedName,r=Object(a.useState)(),i=Object(g.a)(r,2),o=i[0],l=i[1],u=Object(a.useState)("New User"),d=Object(g.a)(u,2),C=d[0],j=d[1],b=Object(a.useRef)(null),h=Object(a.useState)(),p=Object(g.a)(h,2),m=p[0],f=p[1],O=Object(a.useState)(!1),v=Object(g.a)(O,2),N=v[0],y=v[1],w=Object(a.useState)(!0),k=Object(g.a)(w,2),E=k[0],F=k[1],W=Object(a.useState)(!1),T=Object(g.a)(W,2),B=T[0],P=T[1],z=e.chat,Z=e.name,Y=e.secret;return Object(a.useEffect)((function(){var t=new Headers;t.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),t.append("User-Name",e.conn.userName),t.append("User-Secret",e.conn.userSecret),fetch("https://api.chatengine.io/users/me/",{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){l(e.avatar),y(!0),j(e.first_name)}))}),[N]),Object(c.jsxs)("div",{className:"left-rail-header",children:[Object(c.jsx)("input",{type:"file",ref:b,className:"image-input",accept:"image/jpeg,image/png",onChange:function(e){var t,n,c=null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];c&&(!function(e){f(e)}(c),F(!1))}}),!!m&&Object(c.jsx)(L,{crop:!0,file:m,header:"Set Your Avatar",mode:"message",username:e.conn.userName,userstatus:C,onSubmit:function(e){f(e),function(){var e=new Headers;e.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),e.append("User-Name",s),e.append("User-Secret",n.uid);var t=new FormData;t.append("avatar",m,m.name),fetch("https://api.chatengine.io/users/me/",{method:"PATCH",headers:e,body:t,redirect:"follow"}).then((function(){y(!1),l()}))}(),f(null),F(!0)},close:function(){f(null),F(!0)}}),n.uid&&E?Object(c.jsx)("div",{className:"current-user-info",children:Object(c.jsxs)(S.a,{onClick:function(){var e=b.current;e&&(e.value="",e.click())},className:"user-avatar",size:"large",children:[N?Object(c.jsx)(c.Fragment,{children:o?Object(c.jsx)("img",{src:o,style:{borderRadius:"50%",width:"120px"}}):Object(c.jsx)("img",{src:x,style:{borderRadius:"50%",width:"120px"}})}):"",Object(c.jsx)(R.a,{corner:!0,name:"camera",inverted:!0,circular:!0})]})}):Object(c.jsx)("div",{className:"user-loading",children:Object(c.jsx)(U.a,{active:!0,size:"small"})}),Object(c.jsx)("div",{className:"current-username",children:Object(c.jsx)("div",{className:"username-border",children:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?e.toLowerCase():e).replace(/(?:^|\s|["'([{])+\S/g,(function(e){return e.toUpperCase()}))}(decodeURIComponent(s))})}),Object(c.jsxs)("div",{className:"options-icons-container",children:[B?Object(c.jsx)(D,{username:e.conn.userName,userstatus:C,close:function(){P(!1)},onSubmit:function(e,t){!function(e,t){var c=new Headers;c.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),c.append("User-Name",s),c.append("User-Secret",n.uid);var a=new FormData;a.append("name",e),a.append("first_name",t),fetch("https://api.chatengine.io/users/me/",{method:"PATCH",headers:c,body:a,redirect:"follow"}).then((function(){y(!1)}))}(e,t),P(!1)}}):Object(c.jsx)(c.Fragment,{children:C?Object(c.jsxs)("div",{className:"user-status",children:[C," "]}):Object(c.jsx)("div",{className:"user-status",children:"--- "})}),Object(c.jsxs)("div",{className:"options-icons",children:[Object(c.jsx)(M.a,{onClick:function(){return P(!0)}}),Object(c.jsx)(X.a,{onClick:function(){window.confirm("Press OK if you want to delete active chat. Conversation with this person will be lost")&&function(e){var t=new Headers,n=z.people.find((function(e){return e.person.username!==Z}))?z.people.find((function(e){return e.person.username!==Z})):z.people.find((function(e){return e.person.username==Z}));t.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),t.append("User-Name",Z),t.append("User-Secret",Y);var c={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(Z,'"\n}'),redirect:"follow"},a={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(n.person.username,'"\n}'),redirect:"follow"};fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),c).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),a).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(z.id)}}),Object(c.jsx)(G.a,{onClick:function(){window.confirm("Press OK if you want to logout")&&A.auth.signOut().then(console.log("logged out"))}})]})]})]})},T=function(e){var t=e.file,n=e.close,s=e.onSubmit,r=e.crop,i=void 0!==r&&r,o=e.username,l=e.userstatus,A=(Object(a.useContext)(p.e).conn,Object(a.useState)("")),u=Object(g.a)(A,2),d=u[0],C=u[1],I=Object(a.useRef)(),j=Object(a.useState)(o),b=Object(g.a)(j,2),h=b[0],m=(b[1],Object(a.useState)(l)),f=Object(g.a)(m,2),O=f[0];f[1];return console.log(o,l),Object(a.useEffect)((function(){var e=new FileReader;e.onload=function(){return C(e.result)},e.readAsDataURL(t)}),[t]),Object(c.jsxs)("div",{className:"chat-new-avatar",children:[i?Object(c.jsx)(E.a,{ref:I,width:100,height:100,border:40,borderRadius:50,image:d}):Object(c.jsx)(F.a,{size:"medium",src:d,alt:"preview"}),Object(c.jsxs)("div",{className:"image-upload-actions",children:[Object(c.jsx)("button",{className:"cancel",onClick:n,children:"Cancel"}),Object(c.jsx)("button",{className:"submit",onClick:function(){if(i&&I){var e=I.current.getImageScaledToCanvas().toDataURL();fetch(e).then((function(e){return e.blob()})).then((function(e){return s(e,h,O)}))}else s()},children:"Upload"})]})]})},B=function(e){var t=e.username,n=e.userstatus,s=e.close,r=e.onSubmit,i=Object(a.useState)(t),o=Object(g.a)(i,2),l=o[0],A=(o[1],Object(a.useState)(n)),u=Object(g.a)(A,2),d=u[0],C=u[1];return Object(c.jsxs)("div",{className:"edit-profile",children:[Object(c.jsx)("div",{className:"edit-name-input",children:Object(c.jsx)("input",{placeholder:"New status",value:d,onChange:function(e){return C(e.target.value)}})}),Object(c.jsxs)("div",{className:"image-upload-actions",children:[Object(c.jsx)("button",{className:"submit",onClick:function(){r(l,d)},children:"Upload"}),Object(c.jsx)("button",{className:"cancel",onClick:s,children:"Cancel"})]})]})},P=n.p+"static/media/loading.3726f6da.svg",z=function(e){var t=I(),n=t.userObject,s=t.convertedName,r=Object(a.useState)(),i=Object(g.a)(r,2),o=i[0],l=i[1],u=Object(a.useState)(""),d=Object(g.a)(u,2),C=d[0],j=d[1],b=Object(a.useRef)(null),h=Object(a.useState)(),p=Object(g.a)(h,2),m=p[0],f=p[1],O=Object(a.useState)(!1),v=Object(g.a)(O,2),N=v[0],y=v[1],w=Object(a.useState)(!0),k=Object(g.a)(w,2),E=k[0],F=k[1],L=Object(a.useState)(!1),D=Object(g.a)(L,2),W=D[0],z=D[1],Z=e.chat,Y=e.name,K=e.secret;return Object(a.useEffect)((function(){var t=new Headers;t.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),t.append("User-Name",e.conn.userName),t.append("User-Secret",e.conn.userSecret),fetch("https://api.chatengine.io/users/me/",{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){l(e.avatar),y(!0),j(e.first_name)}))}),[N]),Object(c.jsxs)("div",{className:"chat-profile-container",children:[Object(c.jsx)("input",{type:"file",ref:b,className:"image-input",accept:"image/jpeg,image/png",onChange:function(e){var t,n,c=null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];c&&(!function(e){f(e)}(c),F(!1))}}),!!m&&Object(c.jsx)(T,{crop:!0,file:m,header:"Set Your Avatar",mode:"message",username:e.conn.userName,userstatus:C,onSubmit:function(e){f(e),function(){var e=new Headers;e.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),e.append("User-Name",s),e.append("User-Secret",n.uid);var t=new FormData;t.append("avatar",m,m.name),fetch("https://api.chatengine.io/users/me/",{method:"PATCH",headers:e,body:t,redirect:"follow"}).then((function(){y(!1),l()}))}(),f(null),F(!0)},close:function(){f(null),F(!0)}}),n.uid&&E?Object(c.jsx)("div",{className:"current-user-info",children:Object(c.jsxs)(S.a,{onClick:function(){var e=b.current;e&&(e.value="",e.click())},className:"user-avatar",size:"large",children:[N?Object(c.jsx)(c.Fragment,{children:o?Object(c.jsx)("img",{src:o,style:{borderRadius:"50%",width:"120px"}}):Object(c.jsx)("img",{src:x,style:{borderRadius:"50%",width:"120px"}})}):Object(c.jsx)("img",{src:P,alt:""}),Object(c.jsx)(R.a,{corner:!0,name:"camera",inverted:!0,circular:!0})]})}):Object(c.jsx)("div",{className:"user-loading",children:Object(c.jsx)(U.a,{active:!0,size:"small"})}),Object(c.jsxs)("div",{className:"chat-profile-info",children:[Object(c.jsx)("div",{className:"current-username",children:Object(c.jsx)("div",{className:"username-border",children:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?e.toLowerCase():e).replace(/(?:^|\s|["'([{])+\S/g,(function(e){return e.toUpperCase()}))}(decodeURIComponent(s))})}),Object(c.jsxs)("div",{className:"options-icons-container",children:[W?Object(c.jsx)(B,{username:e.conn.userName,userstatus:C,close:function(){z(!1)},onSubmit:function(e,t){!function(e,t){var c=new Headers;c.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),c.append("User-Name",s),c.append("User-Secret",n.uid);var a=new FormData;a.append("name",e),a.append("first_name",t),fetch("https://api.chatengine.io/users/me/",{method:"PATCH",headers:c,body:a,redirect:"follow"}).then((function(){y(!1)}))}(e,t),z(!1)}}):Object(c.jsx)(c.Fragment,{children:C?Object(c.jsxs)("div",{className:"user-status",children:[C," "]}):Object(c.jsx)("div",{className:"user-status",children:"- "})}),Object(c.jsxs)("div",{className:"options-icons",children:[Object(c.jsx)(M.a,{onClick:function(){return z(!0)}}),Object(c.jsx)(X.a,{onClick:function(){window.confirm("Press OK if you want to delete active chat. Conversation with this person will be lost")&&function(e){var t=new Headers,n=Z.people.find((function(e){return e.person.username!==Y}))?Z.people.find((function(e){return e.person.username!==Y})):Z.people.find((function(e){return e.person.username==Y}));t.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),t.append("User-Name",Y),t.append("User-Secret",K);var c={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(Y,'"\n}'),redirect:"follow"},a={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(n.person.username,'"\n}'),redirect:"follow"};fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),c).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),a).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(Z.id)}}),Object(c.jsx)(G.a,{onClick:function(){window.confirm("Press OK if you want to logout")&&A.auth.signOut().then(console.log("logged out"))}})]})]})]})]})},Z=n(481),Y=n(482),K=function(e){var t=Object(a.useRef)();!function(t){var n=Object(a.useState)(!1),c=Object(g.a)(n,2),s=c[0],r=c[1],i=new IntersectionObserver((function(t){var n=Object(g.a)(t,1)[0];r(n.isIntersecting),n.isIntersecting&&e.onVisible()}));Object(a.useEffect)((function(){return i.observe(t.current),function(){i.disconnect()}}),[])}(t);return Object(c.jsx)("div",{ref:t})},H=n(477),J=function(e){var t=Object(a.useContext)(p.e).conn,n=Object(a.useState)(""),s=Object(g.a)(n,2),r=(s[0],s[1],Object(a.useState)(!1)),i=Object(g.a)(r,2),o=(i[0],i[1],Object(a.useState)("")),l=Object(g.a)(o,2),A=l[0],u=l[1],d=Object(a.useState)(""),C=Object(g.a)(d,2),j=C[0],b=C[1],h=I(),m=(h.userObject,h.convertedName);function f(e,n){if(e){var c=n||encodeURIComponent(A.toLowerCase());if(c==m)b("This is your own nickname!"),setTimeout((function(){return b("")}),5e3);else{var a=new Headers;a.append("PRIVATE-KEY","c4d418e8-fa2d-4adc-be73-2f0dc8bf19ac"),fetch("https://api.chatengine.io/users/",{method:"GET",headers:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){e.some((function(e){return e.username==c}))?Object(p.o)(t,{is_direct_chat:!0,usernames:[c]},(function(){u(""),b("")})):(b("There is no such user"),setTimeout((function(){return b("")}),5e3))}))}}}return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f(e.creds)},children:[Object(c.jsx)("input",{placeholder:"Add new chat",value:A,onChange:function(e){return u(e.target.value)}}),Object(c.jsx)(H.a,{onClick:function(){f(e.creds)}})]}),Object(c.jsx)("div",{className:"newChatError",children:j})]})},V={chatListContainer:{maxHeight:"100vh",overflow:"scroll",overflowX:"hidden",backgroundColor:"white",fontFamily:"Avenir"},chatsContainer:{width:"100%",height:"530px",borderRadius:"0px 0px 24px 24px"}},q=function(e){var t=Object(a.useRef)(!1),n=Object(a.useState)(!1),s=Object(g.a)(n,2),r=(s[0],s[1]),i=Object(a.useState)(!0),o=Object(g.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!1),C=Object(g.a)(d,2),I=C[0],j=C[1],b=Object(a.useContext)(p.e),h=b.conn,f=b.chats,x=b.setChats,v=b.setActiveChat,N=b.activeChat,y=f&&f[N],w=Object(a.useState)("440px"),S=Object(g.a)(w,2),R=(S[0],S[1],e.chatAppState.userName),U=e.chatAppState.userSecret;function k(e,t){if(!e)return"";t=t||0;var n=(e=e.replace(" ","T")).substr(0,4),c=e.substr(5,2),a=e.substr(8,2),s=e.substr(11,2),r=e.substr(14,2),i=e.substr(17,2),o=new Date("".concat(n,"-").concat(c,"-").concat(a,"T").concat(s,":").concat(r,":").concat(i));return o.setHours(o.getHours()+t),o}function E(t){return t.sort((function(t,n){var c=t.last_message&&t.last_message.created?k(t.last_message.created,e.chatAppState.offset):k(t.created,e.chatAppState.offset),a=n.last_message&&n.last_message.created?k(n.last_message.created,e.chatAppState.offset):k(n.created,e.chatAppState.offset);return new Date(a)-new Date(c)}))}function F(e){var t=null!==f?f:{},n=O.a.mapKeys(Object(m.a)({},e),"id"),c=Object(m.a)(Object(m.a)({},t),n);x(c),50>Object.keys(c).length&&u(!1)}Object(a.useEffect)((function(){t.current||(t.current=!0,Object(p.m)(e,50,(function(e){F(e);var t=E(e);t.length>0&&v(t[0].id)})))})),Object(a.useEffect)((function(){N||L&&v(L[0].id)}),[f]);var L=E(f?Object.values(f):[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]);return null==f?Object(c.jsx)("div",{}):Object(c.jsxs)("div",{className:"chat-left-wing",children:[Object(c.jsxs)("div",{className:"chat-bar",children:[Object(c.jsx)("div",{className:"chat-bar-logo",children:Object(c.jsx)("img",{src:"data:image/png;base64,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",alt:""})}),Object(c.jsxs)("div",{className:"chat-bar-options",children:[Object(c.jsx)("div",{className:"chat-bar-option",children:Object(c.jsx)(Z.a,{onClick:function(){I?(j(!I),document.querySelector(".ce-chats-container").style.height="530px"):(j(!I),document.querySelector(".ce-chats-container").style.height="425px")}})}),Object(c.jsx)("div",{className:"chat-bar-option",children:Object(c.jsx)(Y.a,{onClick:function(){document.querySelector(".app").classList.toggle("dark")}})}),Object(c.jsx)("div",{className:"chat-bar-option",children:Object(c.jsx)(X.a,{onClick:function(){window.confirm("Press OK if you want to delete active chat. Conversation with this person will be lost")&&function(e){var t=new Headers,n=y.people.find((function(e){return e.person.username!==R}))?y.people.find((function(e){return e.person.username!==R})):y.people.find((function(e){return e.person.username==R}));t.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),t.append("User-Name",R),t.append("User-Secret",U);var c={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(R,'"\n}'),redirect:"follow"},a={method:"DELETE",headers:t,body:'{\n    "username": "'.concat(n.person.username,'"\n}'),redirect:"follow"};fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),c).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),fetch("https://api.chatengine.io/chats/".concat(e,"/people/"),a).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(N)}})}),Object(c.jsxs)("div",{className:"chat-bar-option",children:[" ",Object(c.jsx)(G.a,{onClick:function(){window.confirm("Press OK if you want to logout")&&A.auth.signOut().then(console.log("logged out"))}})]})]})]}),Object(c.jsxs)("div",{className:"chat-left-wing-list",children:[I?Object(c.jsx)(z,{chat:y,conn:h,name:e.chatAppState.userName,secret:e.chatAppState.userSecret}):"",Object(c.jsxs)("div",{style:V.chatListContainer,className:"ce-chat-list",children:[e.chatAppState.renderNewChatForm?e.chatAppState.renderNewChatForm(h):Object(c.jsx)(J,{onClose:e.chatAppState.onClose?function(){return e.chatAppState.onClose()}:void 0}),Object(c.jsxs)("div",{style:V.chatsContainer,className:"ce-chats-container",children:[function(t){return t.map((function(t,n){return t?e.chatAppState.renderChatCard?Object(c.jsx)("div",{children:e.chatAppState.renderChatCard(t,n)},"chat_".concat(n)):"":Object(c.jsx)("div",{},"chat_".concat(n))}))}(L),l&&L.length>0&&Object(c.jsxs)("div",{children:[Object(c.jsx)(K,{onVisible:function(){return r(!0)}}),Object(c.jsx)("div",{style:{height:"8px"}})]})]})]})]})]})},Q=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),s=n[0],r=n[1],i=e.chat;return Object(c.jsxs)("div",{children:[Object(c.jsx)(y.a,{onClick:function(){return r(!0)},style:{color:"rgb(24, 144, 255)",outline:"none"}}),s&&Object(c.jsxs)("div",{style:_.drawerContainer,children:[Object(c.jsx)(w.a,{style:_.closeIcon,onClick:function(){return r(!1)}}),Object(c.jsx)(W,{chat:i,conn:e.conn}),Object(c.jsx)(q,{creds:e.creds,onChatClick:function(){return r(!1)}})]})]})},_={drawerContainer:{position:"fixed",zIndex:"1",top:"0px",left:"0px",width:"100%",height:"100%",backgroundColor:"white",textAlign:"left"},closeIcon:{position:"absolute",left:"28px",top:"32px"},titleContainer:{width:"100%",padding:"24px 0px",textAlign:"center",color:"rgb(24, 144, 255)"},titleText:{fontSize:"24px",fontWeight:"600"}},$=n(12);Object($.setConfiguration)({maxScreenClass:"xl",gutterWidth:0});var ee=function(e){var t=Object(a.useContext)(p.e),n=t.conn,s=t.chats,r=t.activeChat;if(!s||!r||!s[r])return Object(c.jsx)("div",{});if(!n||null===n)return Object(c.jsx)("div",{});var i=s[r],o=i.people.find((function(e){return e.person.username!==n.userName})),g=o?o.person.first_name:"",l=o?function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?e.toLowerCase():e).replace(/(?:^|\s|["'([{])+\S/g,(function(e){return e.toUpperCase()}))}(decodeURIComponent(o.person.username)):"";return Object(c.jsxs)($.Row,{className:"ce-chat-title",style:te.titleSection,children:[Object(c.jsx)($.Col,{xs:2,sm:0,style:Object(m.a)(Object(m.a)({},te.mobileOptiom),{left:"6px"}),className:"ce-chat-list-mobile-option",children:Object(c.jsx)(Q,{chat:e.chat,creds:e.creds,conn:n})}),Object(c.jsxs)($.Col,{xs:8,sm:12,style:te.titleContainer,className:"ce-chat-title-container",children:[o&&o.person.avatar?Object(c.jsx)("img",{src:o.person.avatar,style:{borderRadius:"50%",width:"40px"}}):Object(c.jsx)("img",{src:x,className:"chat-card-avatar",style:{borderRadius:"50%",width:"40px"}}),Object(c.jsxs)("div",{className:"ce-chat-header-container",children:[Object(c.jsx)("div",{style:te.titleText,className:"ce-chat-title-text",id:"ce-chat-feed-title-".concat(l),children:l}),Object(c.jsx)("div",{style:te.subtitleText,className:"ce-chat-subtitle-text",children:g||(i.last_message.created&&i.last_message.created.length>0?"Active ".concat(function(e){if(!e)return"";var t=function(e){if(!e)return"";var t=(e=e.replace(" ","T")).substr(0,4),n=e.substr(5,2),c=e.substr(8,2),a=e.substr(11,2),s=e.substr(14,2),r=e.substr(17,2),i=new Date("".concat(t,"-").concat(n,"-").concat(c,"T").concat(a,":").concat(s,":").concat(r));console.log(i);var o=-i.getTimezoneOffset()/60;return console.log(o),i.setHours(i.getHours()+o),i}(e).toString(),n=t.substr(0,10),c=t.substr(15,6);return"".concat(n," at ").concat(c)}(i.last_message.created)):"Say hello!")})]})]})]})},te={titleSection:{position:"absolute",top:"0px",width:"100%",zIndex:"1",backgroundColor:"rgb(256, 256, 256, 0.92)",fontFamily:"Avenir"},mobileOptiom:{width:"100%",top:"32px",textAlign:"center",color:"rgb(24, 144, 255)",overflow:"hidden"},titleContainer:{width:"100%",padding:"18px 0px",textAlign:"left",color:"rgb(24, 144, 255)"},titleText:{fontSize:"24px",fontWeight:"600"},subtitleText:{fontSize:"12px"}},ne=function(){var e=Object(a.useRef)(!1),t=Object(a.useState)(Date.now()),n=Object(g.a)(t,2),s=n[0],r=n[1],i=Object(a.useContext)(p.e),o=i.conn,l=i.activeChat,A=i.typingCounter,u=A&&A[l]?A[l]:[];return Object(a.useEffect)((function(){e.current||(e.current=!0,setInterval((function(){r(Date.now())}),1e3))})),o&&null!==o?Object(c.jsx)("div",{children:Object.keys(u).map((function(e,t){return o.userName!==e&&s<u[e]+2e3?Object(c.jsx)("div",{style:{color:"var(--paperclip-color)",paddingLeft:"12px",position:"absolute"},children:"".concat(e," is typing...")},"typer_".concat(t)):Object(c.jsx)("div",{},"typer_".concat(t))}))}):Object(c.jsx)("div",{})},ce=n(43),ae=function(e){var t=e.attachment;return t?Object(c.jsxs)("div",{style:se.container,className:"ce-photo-thumbnail",children:[Object(c.jsx)("div",{style:{paddingTop:"100%"}}),Object(c.jsx)("img",{alt:t.id,style:se.image,src:t.file,className:"ce-photo-img",id:"image-".concat(t.id)})]}):Object(c.jsx)("div",{})},se={container:{position:"relative",width:"calc(33% - 8px)",border:"1px solid white",display:"inline-block",cursor:"pointer"},image:{top:"0px",width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},re=n(474),ie=n(483),oe=function(e){var t,n,s=Object(a.useState)({collapsed:!0,hovered:!1,errorMessage:""}),r=Object(g.a)(s,2),i=r[0],o=r[1],l=e.chat;return Object(c.jsxs)("div",{style:{borderTop:"1px solid #f0f0f0"},className:"ce-photo-section",children:[Object(c.jsxs)("div",{onMouseEnter:function(){return o(Object(m.a)(Object(m.a)({},i),{},{hovered:!0}))},onMouseLeave:function(){return o(Object(m.a)(Object(m.a)({},i),{},{hovered:!1}))},onClick:function(){return o(Object(m.a)(Object(m.a)({},i),{},{collapsed:!i.collapsed}))},style:i.hovered?{cursor:"pointer"}:{},className:"ce-section-title-container ce-photo-title-container",children:[Object(c.jsx)("div",{className:"ce-section-title ce-photo-title",style:(t={fontSize:"16px",padding:"12px 12px 12px 0px",fontWeight:"400",fontFamily:"Quicksand",letterSpacing:"1px"},Object(ce.a)(t,"fontWeight","400"),Object(ce.a)(t,"color","rgba(255, 255, 255, 0.7)"),t),children:"Gallery"}),i.collapsed?Object(c.jsx)(re.a,{style:ge.collapseIcon}):Object(c.jsx)(ie.a,{style:ge.collapseIcon})]}),!i.collapsed&&Object(c.jsxs)("div",{className:"ce-photo-feed",children:[Object(c.jsx)("div",{style:{height:"12px"}}),l.attachments.length>0?(n=l.attachments,n.map((function(e,t){return Object(c.jsx)(ae,{attachment:e},"person_".concat(t))}))):Object(c.jsx)("div",{className:"gallery-error",children:" Nothing here yet"})]})]})},ge={collapseIcon:{float:"right",position:"relative",bottom:"30px",right:"12px"}},le=function(){return Object(c.jsx)("div",{className:"chat-settings-box"})},Ae=n(16),ue=n.n(Ae),de=n(475),Ce=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(""),o=Object(g.a)(i,2),l=o[0],A=o[1];return Object(a.useEffect)((function(){A(URL.createObjectURL(e.file))}),[e.file]),Object(c.jsxs)("div",{style:{padding:"12px 6px",display:"inline-block",position:"relative"},onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[Object(c.jsx)("img",{style:Ie.imageSquare,alt:e.file?e.file.name:"",src:l}),s&&Object(c.jsx)(de.a,{style:Ie.closeIcon,onClick:function(){return e.onRemove&&e.onRemove()}})]})},Ie={imageSquare:{height:"108px",width:"108px",border:"1px solid #afafaf",borderRadius:"8px",objectFit:"cover",display:"inline"},closeIcon:{position:"absolute",bottom:"calc(100% - 32px)",left:"96px",width:"0px",cursor:"pointer"}},je=function(e){return Object(c.jsx)("div",{style:{width:"50px",paddingLeft:"12px",position:"absolute",bottom:"70px"},children:e.files.map((function(t,n){return Object(c.jsx)(Ce,{file:t,onRemove:function(){return e.onRemove&&e.onRemove(n)}},"thumb_".concat(n))}))})},be=n(476),he=function(e){var t=Object(a.useState)({hovered:!1}),n=Object(g.a)(t,2),s=n[0],r=n[1];return Object(c.jsxs)("form",{className:"uploader",encType:"multipart/form-data",style:{height:"0px"},children:[Object(c.jsx)("label",{htmlFor:"files",id:"upload-document-button",children:Object(c.jsx)(be.a,{onMouseEnter:function(){return r(Object(m.a)(Object(m.a)({},s),{},{hovered:!0}))},onMouseLeave:function(){return r(Object(m.a)(Object(m.a)({},s),{},{hovered:!1}))},style:Object(m.a)(Object(m.a)({},{cursor:"pointer",position:"absolute",bottom:"20px",right:"63px",fontSize:"18px"}),{color:s.hovered?"#69c0ff":"#1890ff"})})}),Object(c.jsx)("input",{id:"files",accept:"image/x-png,image/gif,image/jpeg",style:{visibility:"hidden"},type:"file",onChange:function(t){return function(t){var n=Array.from(t.target.files);e.onSelectFiles&&e.onSelectFiles(n)}(t)},onClick:function(e){return e.target.value=null}})]})},pe=n(21),me=n(31),fe=n(32),Oe=n(33),xe=function(e){Object(fe.a)(n,e);var t=Object(Oe.a)(n);function n(){var e;Object(pe.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={focused:!1,value:null,height:0},e}return Object(me.a)(n,[{key:"resize",value:function(){var e=document.getElementById("msg-textarea");e.style.height="",e.style.height=Math.min(e.scrollHeight,150)+"px",this.setState({height:Math.min(e.scrollHeight,150)})}},{key:"componentDidMount",value:function(){this.resize()}},{key:"handleChange",value:function(e){this.resize(),this.props.handleChange&&this.props.handleChange(e)}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.props.value.length>0&&this.props.onSubmit&&this.props.onSubmit(e))}},{key:"render",value:function(){var e=this,t=Object(m.a)(Object(m.a)({},ve.input),{overflowY:150===this.state.height?"scroll":"hidden"});return Object(c.jsx)("textarea",{id:"msg-textarea",className:"ce-input ce-textarea-input",rows:"1",style:t,value:this.props.value,placeholder:this.props.label,onBlur:function(){return e.setState({focused:!1})},onFocus:function(){return e.setState({focused:!0})},type:this.props.type?this.props.type:"text",onChange:function(t){return e.handleChange(t)},onKeyDown:function(t){return e.onKeyDown(t)},maxlength:"120",required:!0})}}]),n}(a.Component),ve={input:{border:"1px solid white",width:"calc(100% - 64px - 24px - 44px)",outline:"none",fontSize:"15px",fontFamily:"Avenir",paddingLeft:"12px",paddingRight:"12px",position:"relative",left:"12px",resize:"none",overflowX:"hidden"}},Ne=void 0,ye=function(){var e=Object(a.useContext)(p.e),t=e.conn,n=e.activeChat,s=e.sendingMessages,r=e.setSendingMessages,i=Object(a.useState)({trigger:0,mod:3,value:"",attachments:[]}),o=Object(g.a)(i,2),l=o[0],A=o[1];if(!t||null===t)return Object(c.jsx)("div",{});function u(e){e.preventDefault();var c=l.attachments,a=l.value.trim(),i={text:a,attachments:c,custom_json:{sender_id:Date.now().toString()},sender_username:t.userName?t.userName:t.senderUsername,chat:n};(a.length>0||c.length>0)&&Object(p.u)(t,n,i,(function(e){})),A(Object(m.a)(Object(m.a)({},l),{},{value:"",attachments:[]})),document.getElementById("msg-textarea").style.height="24px";var o=Object(m.a)({},s);o[i.custom_json.sender_id]=i,r(o)}return Object(c.jsxs)("div",{id:"msg-form-container",style:we.NewMessageFormContainer,className:"ce-message-form-container",children:[Object(c.jsx)(je,{files:l.attachments,onRemove:function(e){return function(e){var t=l.attachments;t.splice(e,1),A(Object(m.a)(Object(m.a)({},l),{},{attachments:t}))}(e)}}),Object(c.jsxs)("form",{onSubmit:u.bind(Ne),className:"ce-message-form",children:[Object(c.jsxs)("div",{style:we.inputContainer,className:"ce-message-input-form",children:[Object(c.jsx)(he,{onSelectFiles:function(e){return A(Object(m.a)(Object(m.a)({},l),{},{attachments:e}))}}),Object(c.jsx)(xe,{value:l.value,label:"Send a message...",handleChange:function(e){A(Object(m.a)(Object(m.a)({},l),{},{value:e.target.value,trigger:(l.trigger+1)%l.mod})),1===l.trigger&&Object(p.q)(t,n)}.bind(Ne),onSubmit:u.bind(Ne)})]}),Object(c.jsx)("button",{icon:"send",type:"submit",id:"ce-send-message-button",style:{},children:Object(c.jsx)("img",{src:"data:image/png;base64,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",className:"send-icon",alt:""})})]})]})},we={NewMessageFormContainer:{position:"absolute",bottom:"0px",width:"100%",backgroundColor:"white"},inputContainer:{minHeight:"36px",paddingTop:"10px",paddingBottom:"6px"}},Se=function(){var e=I(),t=e.userObject,n=e.convertedName,s=Object(a.useState)(""),r=Object(g.a)(s,2),i=(r[0],r[1],Object(a.useState)("")),o=Object(g.a)(i,2),l=(o[0],o[1],Object(a.useState)(!1)),A=Object(g.a)(l,2),u=A[0],d=A[1];return Object(a.useEffect)((function(){var e={method:"post",url:"https://api.chatengine.io/users/",headers:{"PRIVATE-KEY":"c4d418e8-fa2d-4adc-be73-2f0dc8bf19ac"},data:{username:n,secret:t.uid}};ue()(e).then((function(){!function(e){var c=new Headers;c.append("Project-ID","23640f53-64ad-4599-9275-2ad1ac133fff"),c.append("User-Name",n),c.append("User-Secret",t.uid),c.append("Content-Type","application/json");var a=JSON.stringify({is_direct_chat:!0,usernames:[n,e]});fetch("https://api.chatengine.io/chats/",{method:"PUT",headers:c,body:a,redirect:"follow",contentType:"application/json; charset=utf-8"}).then((function(e){return e.text()})).catch((function(e){return console.log("error",e)}))}(encodeURIComponent("test account")),d(!0)})).catch((function(){console.log("This account is already created"),d(!0)}))}),[]),Object(c.jsx)("div",{className:"chat-container",children:n&&t&&u?Object(c.jsx)(p.d,{offset:2,projectID:"23640f53-64ad-4599-9275-2ad1ac133fff",userName:n,userSecret:t.uid,height:"630px",renderChatList:function(e){return Object(c.jsx)(q,{chatAppState:e})},renderChatCard:function(e,t){return Object(c.jsx)(N,{chat:e,index:t})},renderNewChatForm:function(e){return Object(c.jsx)(J,{creds:e})},renderChatHeader:function(e){return Object(c.jsx)(ee,{creds:e})},renderIsTyping:function(e){return Object(c.jsx)(ne,{typers:e})},renderPhotosSettings:function(e){return Object(c.jsx)(oe,{chat:e,name:n,secret:t.uid})},renderChatSettings:function(){return Object(c.jsx)(le,{})},renderNewMessageForm:function(e,t){return Object(c.jsx)(ye,{creds:e,chatId:t})}}):""})},Re=n(46),Ue=n(56),ke={userName:"",password:""},Ee=Ue.a().shape({userName:Ue.c().required("Required").min(3,"Must be at leat 3 characters"),password:Ue.c().required("Required")}),Fe=n(484),Le=n(485),De=n(486),Me=n(487),Xe=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],s=t[1],r=Object(o.f)(),i=Object(a.useState)(""),l=Object(g.a)(i,2),C=(l[0],l[1],Object(a.useState)(!1)),I=Object(g.a)(C,2),j=I[0],b=I[1];return Object(c.jsxs)("div",{className:"auth-form",children:[Object(c.jsxs)("div",{className:"logo",children:[Object(c.jsx)(Fe.a,{}),Object(c.jsxs)("div",{className:"logo-text",children:[Object(c.jsx)("div",{className:"logo-text-first",children:"  Chat"}),Object(c.jsx)("div",{className:"logo-text-second",children:"     App"})]})]}),Object(c.jsx)(Re.d,{onSubmit:function(e,t){var n,c=e.userName,a=e.password,r=t.setSubmitting;b(!0),A.auth.signInWithEmailAndPassword("".concat(encodeURIComponent((n=c,n.toLowerCase())),"@chat.engine"),a).then((function(e){e.user||s("We're having trouble logging you in. Please try again.")})).catch((function(e){console.log(e),"auth/wrong-password"===e.code?s("Username or password is invalid"):"auth/user-not-found"===e.code?s("No account for this username"):s("Something went wrong :(")})).finally((function(){r(!1),b(!1)}))},validateOnMount:!0,initialValues:ke,validationSchema:Ee,children:function(e){var t;e.isValid,e.isSubmitting;return Object(c.jsxs)(Re.c,{children:[Object(c.jsxs)("div",{class:"login-fields",children:[Object(c.jsxs)("div",{class:"login-field",children:[Object(c.jsx)(Z.a,{}),Object(c.jsx)(Be,{name:"userName",placeholder:"Username"})]}),Object(c.jsx)(Re.a,{component:"div",name:"userName",className:"error"})," ",Object(c.jsx)("br",{}),Object(c.jsxs)("div",{class:"login-field",children:[Object(c.jsx)(Le.a,{}),Object(c.jsx)(Be,{name:"password",placeholder:"Password",type:"password"})]}),Object(c.jsx)(Re.a,{component:"div",name:"password",className:"error"})]}),Object(c.jsxs)("div",{className:"auth-link-container",children:["Don't have an account?"," ",Object(c.jsx)("span",(t={className:"auth-link",onClick:function(){return r.push("signup")}},Object(ce.a)(t,"className","signup-text"),Object(ce.a)(t,"children","Sign Up!"),t))]}),j?Object(c.jsx)("div",{className:"loading-image",children:Object(c.jsx)("img",{src:P,alt:""})}):Object(c.jsx)("button",{type:"submit",children:"Login"}),!!n&&Object(c.jsx)("div",{className:"error server-error",children:n})]})}}),Object(c.jsxs)("div",{className:"social-media",children:[Object(c.jsxs)("div",{className:"social-media-header",children:[Object(c.jsx)("hr",{})," Login with social media",Object(c.jsx)("hr",{})]}),Object(c.jsxs)("div",{className:"social-login",children:[Object(c.jsxs)("div",{className:"google",onClick:function(){return A.auth.signInWithRedirect(u)},children:[Object(c.jsx)(De.a,{})," Google"]}),Object(c.jsxs)("div",{className:"google",onClick:function(){return A.auth.signInWithRedirect(d)},children:[Object(c.jsx)(Me.a,{})," Facebook"]})]})]})]})},Ge={password:"",userName:"",verifyPassword:""},We=Ue.a().shape({password:Ue.c().required("Required").min(8,"Must be at least 8 characters"),verifyPassword:Ue.c().required("Required").oneOf([Ue.b("password"),null],"Password must match"),userName:Ue.c().required("Required").matches("^[A-Za-z0-9 ]*[A-Za-z0-9][A-Za-z0-9 ]*$","Please use letters or numbers").min(3,"Must be at leat 3 characters").max(20,"You have reached limit of characters")}),Te=function(){var e=Object(o.f)(),t=Object(a.useState)(""),n=Object(g.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(!1),l=Object(g.a)(i,2),u=l[0],d=l[1];return Object(c.jsxs)("div",{className:"auth-form signup-fields",children:[Object(c.jsxs)("div",{className:"logo",children:[Object(c.jsx)(Fe.a,{}),Object(c.jsxs)("div",{className:"logo-text",children:[Object(c.jsx)("div",{className:"logo-text-first",children:"  Chat"}),Object(c.jsx)("div",{className:"logo-text-second",children:"     App"})]})]}),Object(c.jsx)(Re.d,{onSubmit:function(e,t){var n,c=e.userName,a=e.password,s=t.setSubmitting;d(!0),A.auth.createUserWithEmailAndPassword("".concat(encodeURIComponent((n=c,n.toLowerCase())),"@chat.engine"),a).then((function(e){console.log("Firebase account created")})).catch((function(e){"auth/email-already-in-use"===e.code?r("An account with this username already exists"):r("We're having trouble signing you up. Please try again.")})).finally((function(){s(!1),d(!1)}))},validateOnMount:!0,initialValues:Ge,validationSchema:We,children:function(t){t.isValid,t.isSubmitting;return Object(c.jsxs)(Re.c,{children:[Object(c.jsxs)("div",{class:"login-fields ",children:[Object(c.jsxs)("div",{class:"login-field",children:[Object(c.jsx)(Z.a,{}),Object(c.jsx)(Be,{name:"userName",placeholder:"Username"})]}),Object(c.jsx)(Re.a,{component:"div",name:"userName",className:"error"}),Object(c.jsxs)("div",{class:"login-field",children:[Object(c.jsx)(Le.a,{}),Object(c.jsx)(Be,{name:"password",type:"password",placeholder:"Password"})]}),Object(c.jsx)(Re.a,{component:"div",name:"password",className:"error"}),Object(c.jsxs)("div",{class:"login-field",children:[Object(c.jsx)(Le.a,{}),Object(c.jsx)(Be,{name:"verifyPassword",placeholder:"Verify Password",type:"password"})]}),Object(c.jsx)(Re.a,{component:"div",name:"verifyPassword",className:"error"})]}),u?Object(c.jsx)("div",{className:"loading-image",children:Object(c.jsx)("img",{src:P,alt:""})}):Object(c.jsx)("button",{type:"submit",children:"Sign Up"}),Object(c.jsxs)("div",{className:"auth-link-container already-account",children:["Already have an account?"," ",Object(c.jsx)("span",{className:"auth-link signup-text",onClick:function(){return e.push("login")},children:"Log In!"})]})]})}}),!!s&&Object(c.jsx)("div",{className:"error",children:s})]})},Be=function(e){var t=e.name,n=(e.label,e.type),a=void 0===n?"text":n,s=e.placeholder;return Object(c.jsx)("label",{children:Object(c.jsx)(Re.b,{name:t,type:a,placeholder:s})})};n(453).config(),i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root"))}},[[456,1,2]]]);
//# sourceMappingURL=main.87c0b575.chunk.js.map